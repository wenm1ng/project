<!DOCTYPE html>
<!-- saved from url=(0086)https://login.vancl.com/login/reg.aspx?http%3A%2F%2Fwww.vancl.com%2F%23ref%3Dhead-tcdl -->
<html>
 <head id="Head1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>小明博客 - 会员免费注册</title> 
  <link rel="shortcut icon" href="/public/images/icon.jpg" type="image/x-icon" />
  <script type="text/javascript" language="javascript" src="/public/register/jquery-1.8.3.min.js"></script> 
  <link href="/public/register/reg.css" type="text/css" rel="stylesheet" /> 
 </head> 
 <body id="body" class="wrapper"> 
  <div id="top" style="margin:10px 0 0 0;padding:0 0 10px 0; border-bottom:solid 1px #919191;"> 
   <img src="/public/images/logo.png" style="width:187px;height:48px" alt="小明博客" title="小明博客" onclick="javascript:window.location.href='{:url('index/index/index')}'" style="cursor:pointer" />
   <img src="/public/images/icon.jpg" alt="" style="height:48px" onclick="javascript:window.location.href='{:url('index/index/index')}'">
  </div> 
  <!--logo--> 
  <form method="post" action="{:url('register')}" method="post" id="myform"> 
   <div class="aspNetHidden"> 
   </div> 
   <span class="box15"></span> 
   <div class="regist"> 
    <h1> 注册新用户 <span>我已经注册，现在就<a href="{:url('login')}">登录</a></span> </h1> 
    <div style="width: 100%; height: 10px; overflow: hidden; clear: both;"> 
    </div> 
    <div class="content_left"> 
     <div class="tag clearfix"> 
      <h2> 选择注册方式：</h2> 
      <ul id="tags"> 
       <li class="tb-email" onclick="TabChange('email');return false;">使用Email注册</li> 
       <li class="tb-phone tb-phone-select" onclick="TabChange('phone');return false">使用手机号注册</li> 
      </ul> 
     </div> 
     <!--tag--> 
     <div class="infor clearfix" style="overflow: inherit"> 
      <div class="email"> 
       <ul id="v2regListInfo_bar">

        <li id="liphonecode" class="v2reg_bg1" style="height:55px"> 
          <input type="text" name="loginName" id="username" placeholder="请输入用户名" style="width:410px;height:45px;margin-top:0px">
        </li>

        <li id="liphonecode" class="v2reg_bg1" style="display: list-item;height:55px"> 
          <input type="email" name="email" id="email" placeholder="请输入邮箱" style="width:410px;height:45px">
        </li>

        <li id="liphonecode" style="display: list-item;height:55px"> 
          <input type="text" name="fcode" id="fcode" value="" placeholder="请输入验证码" style="width:250px;height:45px">
          <img src="{:url('verify')}" id="fimg" onclick="this.src=this.src+'?a=1'"  style="width:150px;float:right" >
        </li>


        <li class="v2reg_bg1" style="height:55px">          
           <input  type="password" name="password" id="pwd" placeholder="请输入密码" style="width:410px;height:45px" value="" /> 
        </li> 

        <li class="v2reg_bg1">         
          <input  type="password" name="repwd" id="repwd" style="width:410px;height:45px" placeholder="请再次输入密码" value=""  /> 
        </li>

        
        <li class="v2reg_bg1"> 
         <div class="v2reg_bt"> 
           <input type="submit" value="立即注册" id="submitRegister_false" class="submitStyle" style="background: #B42025; color: #FFFFFF;"/>        
         </div> </li> 
       </ul> 
        <a href="{:url('index/index/index')}" class="forget" style="float:left;color:#B42025;font-weight:bold;margin-top:10px;font-size:14px">返回主页</a>

      </div> 
      <!--email--> 
     </div> 
     <!--infor--> 
    </div> 
    <!--content_left--> 
    <div class="content_right"> 
     <img src="" id="ContentPlaceHolder1__advertImage" style="width: 465px;" /> 
     <img src="/public/images/xiaoming1.jpg" style="width: 465px" /> 
    </div> 
    <!--content_right--> 
    <div class="clear"> 
    </div> 
   </div> 
   <!--regist--> 
   <!--wrapper--> 
  </form> 
  <!--bottom--> 
  <center> 
   <div id="bottom" align="center"> 
    <div id="bottoms"> 
     <p>Copyright &copy; 2016-2017 www.aiyanxin.club <br>
            <a href="http://icp.chinaz.com/aiyanxin.club" target="_blank">粤ICP备17115499号-1</a>  
        </p>
     <div id="footerArea"> 
      <div class="subFooter">
       <a rel="nofollow" href="https://search.szfw.org/cert/l/CX20111229001302001330" class="redLogo" target="_blank"></a>
       <span class="costumeOrg"></span>
       <a rel="nofollow" href="http://www.315online.com.cn/member/315090053.html" class="wsjyBzzx" target="_blank"></a>
       <a rel="nofollow" href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202010081900017" class="vanclMsg" target="_blank"></a>
      </div> 
     </div> 
    </div> 
   </div> 
  </center> 
 </body>
 <script type="text/javascript">

    // 直接提交时赋值false；
    flag=false;
    //用户名验证
    $("#username").focus(function(){
        //清除span
        $(this).next('span').remove();
        if($(this).val()==null){
          //1.获取焦点的提示信息
          $("<span>请输入正确的信息</span>").css('color','red').insertAfter($(this));
          flag=false;
        }else{
          flag=false;
        }        
    }).blur(function(){
        //2.失去焦点 获取用户值 正则的判断
        //获取用户值
        s=$(this);
        //清除
        s.next('span').remove();
        ss=s.val();
        // alert(ss);
        //匹配正则
        if(ss.match(/^\w{4,16}$/)==null){
            // alert('此用户不符合正则');
            $("<span>请输入4-16位字符</span>").css('color','red').insertAfter(s);
            flag=false;
        }else{
            //3.Ajax的验证
            $.get("{:url('ajax')}",{loginName:ss,type:1},function(data){
                // alert(data);
                //判断
                if(data){
                    $(this).next('span').remove();
                    $("<span>此用户可用</span>").css('color','green').insertAfter(s);
                      flag=true;
                }else{
                    $(this).next('span').remove();
                    $("<span>此用户已经存在</span>").css('color','red').insertAfter(s);
                        flag=false;
                }
            });
        }
    });

    //邮箱验证
    $("#email").focus(function(){
        //清除span
        $(this).next('span').remove();
        if($(this).val()==null){
          //1.获取焦点的提示信息
          $("<span>请输入邮箱</span>").css('color','red').insertAfter($(this));
            flag=false;
        }else{
            flag=false;
        }              
      }).blur(function(){
         e=$(this);
          //清除
          e.next('span').remove();
          ee=e.val();
          // 邮箱规则
          var myreg = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
          if(!myreg.test(ee))
          {
            $(this).next('span').remove();
            $("<span>邮箱名不符合规则</span>").css('color','red').insertAfter(e);
            flag=true;
         }else{
              //Ajax的验证
              $.get("{:url('ajax')}",{email:ee,type:2},function(data){
                  // alert(data);
                  //判断
                  if(data){
                      $(this).next('span').remove();
                      $("<span>该邮箱可用</span>").css('color','green').insertAfter(e);
                        flag=true;
                  }else{
                      $(this).next('span').remove();
                      $("<span>此邮箱已存在</span>").css('color','red').insertAfter(e);
                        flag=false;
                  }
              });          
          }              
      });

    // 验证码的验证
    $("#fcode").live('focus',function(){
      $("#fimg").next('span').remove();
      fff=$(this).val();
      if(fff){        
        // alert(fff);
        //Ajax的验证
        $.get("{:url('ajax')}",{fcode:fff,type:3},function(data){
            // alert(data);
            //判断
            if(data){
                $("#fimg").next('span').remove();
                $("<span style='width:410px;height:10px;float:left'>验证码输入正确</span>").css('color','green').insertAfter($("#fimg"));
                  flag=true;
            }else{
                $("#fimg").next('span').remove();
                $("<span style='width:410px;height:10px;float:left'>验证码不正确</span>").css('color','red').insertAfter($("#fimg"));
                // alert('1');
                  flag=false;
            }
        });               
      }else{
        $("<span style='width:410px;height:10px;float:left'>请输入验证码</span>").css('color','red').insertAfter($("#fimg"));
      }      
    }).blur(function(){
      //清除
        $("#fimg").next('span').remove();
        ff=$(this).val();
        //Ajax的验证
        $.get("{:url('ajax')}",{fcode:ff,type:3},function(data1){
            // alert(data);
            //判断
            if(data1){
                $("#fimg").next('span').remove();
                $("<span style='width:410px;height:10px;float:left'>验证码输入正确</span>").css('color','green').insertAfter($("#fimg"));
                  flag=true;
            }else{
                $("#fimg").next('span').remove();
                $("<span style='width:410px;height:10px;float:left'>验证码不正确</span>").css('color','red').insertAfter($("#fimg"));
                // alert('2');
                  flag=false;
            }
        })          
    })
      
  
   // 密码验证
    $("#pwd").focus(function(){
        //清除span
        $(this).next('span').remove();
        //1.获取焦点的提示信息
        $("<span>请设定密码</span>").css('color','red').insertAfter($(this));
    }).blur(function(){
        //2.失去焦点 获取用户值 正则的判断
        //获取用户值
        s=$("#pwd");
        //清除
        s.next('span').remove();
        ss=s.val();
        // alert(ss);
        //匹配正则
        if(ss.match(/^\w{6,16}$/)==null){
            // alert('此用户不符合正则');
            $("<span>请输入6-16位字符</span>").css('color','red').insertAfter(s);
        }else{
            // 确认密码
            $("#repwd").click(function(){
                $(this).next('span').remove();                
            }).blur(function(){
                repwd=$(this).val();
                if(repwd!=ss){
                  $(this).next('span').remove();
                  $("<span>两次密码不一致</span>").css('color','red').insertAfter($(this));
                    flag=false;
                }else{
                    flag = true;
                }
            });            
        }
    });

    // 确认密码的判断
    $("#repwd").click(function(){
        $(this).next('span').remove();                
    }).blur(function(){
        repwd=$(this).val();
        ss=$("#pwd").val();
        if(repwd!=ss){
          $(this).next('span').remove();
          $("<span>两次密码不一致</span>").css('color','red').insertAfter($(this));
            flag=false;
        }else{
            flag = true;
        }
    });

    // 判断空值
    if($("#username").val() == undefined || ($("#pwd").val()) == null || $("#repwd").val()==null || $("#email").val()==null || $("#fcode").val()==null){
      flag==false;
    }

    // if($("input:radio").attr('checked') === undefined ){
    //   alert($("input:radio").attr('checked'));
    // }
    //4.表单提交
    $("form").submit(function(){
        // alert('ssss');
        // return false;
        if(!flag){
               return false;
        }else{
               return true;
        }
    });
</script> 
</html>