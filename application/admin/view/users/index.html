<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>用户管理</title>
	<link rel="stylesheet" type="text/css" href="__LOCAL__/css/advance-list.css">
	<link rel="stylesheet" type="text/css" href="__LOCAL__/css/bootstrap.min.css">
</head>
<body>
<div class="today-title">
	<div class="title-1"><h3>用户管理</h3></div>
</div>
<div class="today-search">
	<button type="button" class="btn btn-large btn-primary disabled" disabled="disabled" style="height:40px;margin-top:-10px;float:right;margin-right:20px;">新增</button>
</div>
<div class="today-table">
		<!-- 遮罩start -->
			<div class="body-box">
		<!-- 遮罩stop -->
			</div>
	<table class="table table-bordered" id="tablePage" style="float:left;">
		<tr id="table-title">
			<td>序号</td>
			<td>手机号</td>
			<td>押金</td>
			<td>余额</td>
			<td>累计消费金额</td>
			<td>消费次数</td>
			<td>用户地址</td>
			<td>使用状态</td>
			<td>操作</td>
		</tr>
		{volist name='list' id='vo'}
		<tr>
			<td>{++$key}</td>
			<td>{$vo.mobile}</td>
			<td>{$vo.depositmoney}</td>
			<td>{$vo.usermoney}</td>
			<td>{$vo.allmoney}</td>
			<td>{$vo.allnum}</td>
			<td>{$vo.address}</td>
			<td>{$sta[$vo.user_status]}</td>
			<td><a href="javascript:void('0')" onclick="editStatus(this,{$vo.user_status},{$vo.userid})">{$status[$vo.user_status]}</a></td>
		</tr>
		{/volist}
	</table>
</div>
<div class="today-page">
	<div class="pagination pagination-large">
	<div id="number"><input id="countnum" min="10" max="50" type="number" value="50" style="width:32px;height:35px;" onBlur="count()"></div>
	  <ul id="page">
	  	
	  </ul>
	<div id="number-show"><span>共180条。每页显示50条</span></div>
	</div>
</div>
<script type="text/javascript" src="__LOCAL__/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="__LOCAL__/js/jquery-2.0.2.min.js"></script>
<script type="text/javascript" src="__LOCAL__/js/bootstrap.min.js"></script>
<script type="text/javascript" src="__LOCAL__/js/table-page.js"></script>
<script type="text/javascript" src="__LOCAL__/js/advance-list.js"></script>
<script type="text/javascript">
function editStatus(o,status,userid)
{
	// console.log(this.parentNode);
	$.ajax({
		type:'post',
		data:'status='+status+'&userid='+userid,
		url:'{:url("user/openUserStatus")}',
		success:function(data){
			if(status == 100){
				$(o).parent().parent().append('<td><a href="javascript:void(0)" onclick="editStatus(this,-100,'+ status +')">关闭禁用</a></td>');
				$(o).parent().prev().html('');
				$(o).parent().prev().html('禁用');
				$(o).parent().remove();
			}else if(status == -100){
				$(o).parent().parent().append('<td><a href="javascript:void(0)" onclick="editStatus(this,100,'+ status +')">禁用</a></td>');
				$(o).parent().prev().html('');
				$(o).parent().prev().html('启用');
				$(o).parent().remove();
			}
		},
		dataType:'json'
	});
}	

</script>
</body>
</html>