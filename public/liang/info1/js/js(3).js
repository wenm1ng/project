(function(e){var b=e.vancl,a=e.v,c=e.vc,d={};d={getQueryStr:function(g){var h=new RegExp("[&,?]"+this.encode(g)+"=([^\\&]*)","i");var f=h.exec(document.location.search);if(f==null){return""}return this.decode(f[1])},encode:function(f){return encodeURIComponent(f)},decode:function(f){return decodeURIComponent(f)}};d.cookie=function(o,x,r){if(!o){return null}if(arguments.length===1){var h=this.encode(o)+"=",j=document.cookie.indexOf(h),l=null,t={};if(j>-1){j=j+h.length;var f=document.cookie.indexOf(";",j);if(f===-1){f=document.cookie.length}l=document.cookie.substring(j,f);if(l.length>0){if(l.indexOf("&")===-1&&l.indexOf("=")===-1){return this.decode(l)}var v=l.split("&");for(var m=0,n=v.length;m<n;m++){var s=v[m].split("=");t[this.decode(s[0])]=this.decode(s[1])}return t}}return null}if(x instanceof Array){var w={},g=this.cookie(o),q=(g instanceof Object?g:null)||{};$.each(x,function(z,A){w[A]=q[A]});return w}if(x instanceof Object||x===null||(x.constructor===String)){var k=this.encode(o)+"=";if(x===null){k+="; expires = "+new Date(0).toGMTString()}else{var u;if((x.constructor===String)){u=this.encode(x)}else{g=this.cookie(o);var p=(g instanceof Object?g:null)||{};x=$.extend(p,x);u=[];for(var y in x){if(y.length>0&&x.hasOwnProperty(y)&&x[y]){u.push(this.encode(y)+"="+this.encode(x[y]))}}}if(u.length>0){k+=(x.constructor===String)?u:u.join("&");if(r&&r.length>0){if(r.expires instanceof Date){k+="; expires = "+r.expires.toGMTString()}if(r.path){k+="; path = "+r.path}if(r.domain){k+="; domain = "+r.domain}if(r.secure==="secure"){k+="; secure"}}}else{k+="; expires = "+new Date(0).toGMTString()}}document.cookie=k;return}};d.dialog={alert:function(f){f.buttons={"确定":function(){$.isFunction(f.fn)?f.fn():"";$(this).dialog("destroy").remove()}};this.custDialog(f)},confirm:function(f){f.buttons={"确定":function(){$.isFunction(f.fn)?f.fn():"";$(this).dialog("destroy").remove()},"取消":function(){$(this).dialog("destroy").remove()}};this.custDialog(f)},custDialog:function(f){f.title=f.title||"";f.closeText="关闭";f.msg=f.msg||"";f.modal=f.modal||false;f.buttons=f.buttons||{};$("<div></div>").append(f.msg).dialog(f)}};e.vancl=e.v=e.vc=d})(window);Date.prototype.isLeapYear=function(){return(0==this.getYear()%4&&((this.getYear()%100!=0)||(this.getYear()%400==0)))};Date.prototype.format=function(a){var d=["日","一","二","三","四","五","六"];var c={"M+":this.getMonth()+1,"d+|D+":this.getDate(),"h+|H+":this.getHours(),"w|W":d[this.getDay()],"m+":this.getMinutes(),"s+":this.getSeconds()};if(/(y+|Y+)/.test(a)){a=a.replace(RegExp.$1,this.getFullYear().toString().substr(4-RegExp.$1.length))}for(var b in c){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,RegExp.$1.length==1?c[b]:("00"+c[b]).substr((""+c[b]).length))}}return a};(function($){$.fn.ajaxSubmit=function(options){if(typeof options=="function"){options={success:options}}options=$.extend({url:this.attr("action")||window.location,type:this.attr("method")||"GET"},options||{});var a=this.formToArray(options.semantic);if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){return this}var veto={};$.event.trigger("form.submit.validate",[a,this,options,veto]);if(veto.veto){return this}var q=$.param(a);if(options.type.toUpperCase()=="GET"){options.url+=(options.url.indexOf("?")>=0?"&":"?")+q;options.data=null}else{options.data=q}var $form=this,callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm()})}if(options.clearForm){callbacks.push(function(){$form.clearForm()})}if(!options.dataType&&options.target){var oldSuccess=options.success;callbacks.push(function(data){$(options.target).attr("innerHTML",data).evalScripts().each(oldSuccess,arguments)})}else{if(options.success){callbacks.push(options.success)}}options.success=function(data,status){for(var i=0,max=callbacks.length;i<max;i++){callbacks[i](data,status,$form)}};var files=$("input:file",this).fieldValue();var found=false;for(var j=0;j<files.length;j++){if(files[j]){found=true}}if(options.iframe||found){fileUpload()}else{$.ajax(options)}$.event.trigger("form.submit.notify",[this,options]);return this;function fileUpload(){var form=$form[0];var opts=$.extend({},$.ajaxSettings,options);var id="jqFormIO"+$.fn.ajaxSubmit.counter++;var $io=$('<iframe id="'+id+'" name="'+id+'" />');var io=$io[0];var op8=$.browser.opera&&window.opera.version()<9;if($.browser.msie||op8){io.src='javascript:false;document.write("");'}$io.css({position:"absolute",top:"-1000px",left:"-1000px"});var xhr={responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){}};var g=opts.global;if(g&&!$.active++){$.event.trigger("ajaxStart")}if(g){$.event.trigger("ajaxSend",[xhr,opts])}var cbInvoked=0;var timedOut=0;setTimeout(function(){$io.appendTo("body");io.attachEvent?io.attachEvent("onload",cb):io.addEventListener("load",cb,false);var encAttr=form.encoding?"encoding":"enctype";var t=$form.attr("target");$form.attr({target:id,method:"POST",encAttr:"multipart/form-data",action:opts.url});if(opts.timeout){setTimeout(function(){timedOut=true;cb()},opts.timeout)}form.submit();$form.attr("target",t)},10);function cb(){if(cbInvoked++){return}io.detachEvent?io.detachEvent("onload",cb):io.removeEventListener("load",cb,false);var ok=true;try{if(timedOut){throw"timeout"}var data,doc;doc=io.contentWindow?io.contentWindow.document:io.contentDocument?io.contentDocument:io.document;xhr.responseText=doc.body?doc.body.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(opts.dataType=="json"||opts.dataType=="script"){var ta=doc.getElementsByTagName("textarea")[0];data=ta?ta.value:xhr.responseText;if(opts.dataType=="json"){eval("data = "+data)}else{$.globalEval(data)}}else{if(opts.dataType=="xml"){data=xhr.responseXML;if(!data&&xhr.responseText!=null){data=toXml(xhr.responseText)}}else{data=xhr.responseText}}}catch(e){ok=false;$.handleError(opts,xhr,"error",e)}if(ok){opts.success(data,"success");if(g){$.event.trigger("ajaxSuccess",[xhr,opts])}}if(g){$.event.trigger("ajaxComplete",[xhr,opts])}if(g&&!--$.active){$.event.trigger("ajaxStop")}if(opts.complete){opts.complete(xhr,ok?"success":"error")}setTimeout(function(){$io.remove();xhr.responseXML=null},100)}function toXml(s,doc){if(window.ActiveXObject){doc=new ActiveXObject("Microsoft.XMLDOM");doc.async="false";doc.loadXML(s)}else{doc=(new DOMParser()).parseFromString(s,"text/xml")}return(doc&&doc.documentElement&&doc.documentElement.tagName!="parsererror")?doc:null}}};$.fn.ajaxSubmit.counter=0;$.fn.ajaxForm=function(options){return this.ajaxFormUnbind().submit(submitHandler).each(function(){this.formPluginId=$.fn.ajaxForm.counter++;$.fn.ajaxForm.optionHash[this.formPluginId]=options;$(":submit,input:image",this).click(clickHandler)})};$.fn.ajaxForm.counter=1;$.fn.ajaxForm.optionHash={};function clickHandler(e){var $form=this.form;$form.clk=this;if(this.type=="image"){if(e.offsetX!=undefined){$form.clk_x=e.offsetX;$form.clk_y=e.offsetY}else{if(typeof $.fn.offset=="function"){var offset=$(this).offset();$form.clk_x=e.pageX-offset.left;$form.clk_y=e.pageY-offset.top}else{$form.clk_x=e.pageX-this.offsetLeft;$form.clk_y=e.pageY-this.offsetTop}}}setTimeout(function(){$form.clk=$form.clk_x=$form.clk_y=null},10)}function submitHandler(){var id=this.formPluginId;var options=$.fn.ajaxForm.optionHash[id];$(this).ajaxSubmit(options);return false}$.fn.ajaxFormUnbind=function(){this.unbind("submit",submitHandler);return this.each(function(){$(":submit,input:image",this).unbind("click",clickHandler)})};$.fn.formToArray=function(semantic){var a=[];if(this.length==0){return a}var form=this[0];var els=semantic?form.getElementsByTagName("*"):form.elements;if(!els){return a}for(var i=0,max=els.length;i<max;i++){var el=els[i];var n=el.name;if(!n){continue}if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el){a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y})}continue}var v=$.fieldValue(el,true);if(v&&v.constructor==Array){for(var j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]})}}else{if(v!==null&&typeof v!="undefined"){a.push({name:n,value:v})}}}if(!semantic&&form.clk){var inputs=form.getElementsByTagName("input");for(var i=0,max=inputs.length;i<max;i++){var input=inputs[i];var n=input.name;if(n&&!input.disabled&&input.type=="image"&&form.clk==input){a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y})}}}return a};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic))};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return}var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]})}}else{if(v!==null&&typeof v!="undefined"){a.push({name:this.name,value:v})}}});return $.param(a)};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=="undefined"||(v.constructor==Array&&!v.length)){continue}v.constructor==Array?$.merge(val,v):val.push(v)}return val};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(typeof successful=="undefined"){successful=true}if(successful&&(!n||el.disabled||t=="reset"||t=="button"||(t=="checkbox"||t=="radio")&&!el.checked||(t=="submit"||t=="image")&&el.form&&el.form.clk!=el||tag=="select"&&el.selectedIndex==-1)){return null}if(tag=="select"){var index=el.selectedIndex;if(index<0){return null}var a=[],ops=el.options;var one=(t=="select-one");var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=$.browser.msie&&!(op.attributes.value.specified)?op.text:op.value;if(one){return v}a.push(v)}}return a}return el.value};$.fn.clearForm=function(){return this.each(function(){$("input,select,textarea",this).clearFields()})};$.fn.clearFields=$.fn.clearInputs=function(){return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(t=="text"||t=="password"||tag=="textarea"){this.value=""}else{if(t=="checkbox"||t=="radio"){this.checked=false}else{if(tag=="select"){this.selectedIndex=-1}}}})};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})}})(jQuery);(function(j){var k="unobtrusiveAjaxClick",p="unobtrusiveValidation";function l(h,f){var e=window,g=(h||"").split(".");while(e&&g.length){e=e[g.shift()]}if(typeof e==="function"){return e}f.push(h);return Function.constructor.apply(null,f)}function m(b){return b==="GET"||b==="POST"}function o(d,c){!m(c)&&d.setRequestHeader("X-HTTP-Method-Override",c)}function q(f,a,h){var g;if(h.indexOf("application/x-javascript")!==-1){return}g=(f.getAttribute("data-ajax-mode")||"").toUpperCase();j(f.getAttribute("data-ajax-update")).each(function(i,b){var d;switch(g){case"BEFORE":d=b.firstChild;j("<div />").html(a).contents().each(function(){b.insertBefore(this,d)});break;case"AFTER":j("<div />").html(a).contents().each(function(){b.appendChild(this)});break;default:j(b).html(a)}})}function n(a,c){var h,s,d,f;h=a.getAttribute("data-ajax-confirm");if(h&&!window.confirm(h)){return}s=j(a.getAttribute("data-ajax-loading"));f=a.getAttribute("data-ajax-loading-duration")||0;j.extend(c,{type:a.getAttribute("data-ajax-method")||undefined,url:a.getAttribute("data-ajax-url")||undefined,beforeSend:function(e){var b;o(e,d);b=l(a.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments);b!==false&&s.show(f);return b},complete:function(){s.hide(f);l(a.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(b,i,g){q(a,b,g.getResponseHeader("Content-Type")||"text/html");l(a.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:l(a.getAttribute("data-ajax-failure"),["xhr","status","error"])});c.data.push({name:"X-Requested-With",value:"XMLHttpRequest"});d=c.type.toUpperCase();if(!m(d)){c.type="POST";c.data.push({name:"X-HTTP-Method-Override",value:d})}j.ajax(c)}function r(d){var a=j(d).data(p);return !a||!a.validate||a.validate()}j("a[data-ajax=true]").live("click",function(b){b.preventDefault();n(this,{url:this.href,type:"GET",data:[]})});j("form[data-ajax=true] input[type=image]").live("click",function(a){var s=a.target.name,b=j(a.target),i=b.parents("form")[0],h=b.offset();j(i).data(k,[{name:s+".x",value:Math.round(a.pageX-h.left)},{name:s+".y",value:Math.round(a.pageY-h.top)}]);setTimeout(function(){j(i).removeData(k)},0)});j("form[data-ajax=true] :submit").live("click",function(a){var f=a.target.name,b=j(a.target).parents("form")[0];j(b).data(k,f?[{name:f,value:a.target.value}]:[]);setTimeout(function(){j(b).removeData(k)},0)});j("form[data-ajax=true]").live("submit",function(b){var a=j(this).data(k)||[];b.preventDefault();if(!r(this)){return}n(this,{url:this.action,type:this.method||"GET",data:a.concat(j(this).serializeArray())})})})(jQuery);/* jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,f){function h(a,d){var j=a.nodeName.toLowerCase();if("area"===j){var k=a.parentNode,l=k.name,m;return !a.href||!l||k.nodeName.toLowerCase()!=="map"?!1:(m=e("img[usemap=#"+l+"]")[0],!!m&&i(m))}return(/input|select|textarea|button|object/.test(j)?!a.disabled:"a"==j?a.href||d:d)&&i(a)}function i(a){return !e(a).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version){return}e.extend(e.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(a,d){return typeof a=="number"?this.each(function(){var b=this;setTimeout(function(){e(b).focus(),d&&d.call(b)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?e(document):a},zIndex:function(a){if(a!==f){return this.css("zIndex",a)}if(this.length){var b=e(this[0]),j,k;while(b.length&&b[0]!==document){j=b.css("position");if(j==="absolute"||j==="relative"||j==="fixed"){k=parseInt(b.css("zIndex"),10);if(!isNaN(k)&&k!==0){return k}}b=b.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(a,b){function m(n,o,p,q){return e.each(j,function(){o-=parseFloat(e.curCSS(n,"padding"+this,!0))||0,p&&(o-=parseFloat(e.curCSS(n,"border"+this+"Width",!0))||0),q&&(o-=parseFloat(e.curCSS(n,"margin"+this,!0))||0)}),o}var j=b==="Width"?["Left","Right"]:["Top","Bottom"],k=b.toLowerCase(),l={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+b]=function(d){return d===f?l["inner"+b].call(this):this.each(function(){e(this).css(k,m(this,d)+"px")})},e.fn["outer"+b]=function(d,n){return typeof d!="number"?l["outer"+b].call(this,d):this.each(function(){e(this).css(k,m(this,d,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(a){return function(b){return !!e.data(b,a)}}):function(a,j,k){return !!e.data(a,k[3])},focusable:function(a){return h(a,!isNaN(e.attr(a,"tabindex")))},tabbable:function(a){var c=e.attr(a,"tabindex"),j=isNaN(c);return(j||c>=0)&&h(a,!j)}}),e(function(){var a=document.body,d=a.appendChild(d=document.createElement("div"));d.offsetHeight,e.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=d.offsetHeight===100,e.support.selectstart="onselectstart" in d,a.removeChild(d).style.display="none"}),e.curCSS||(e.curCSS=e.css),e.extend(e.ui,{plugin:{add:function(a,j,k){var l=e.ui[a].prototype;for(var m in k){l.plugins[m]=l.plugins[m]||[],l.plugins[m].push([j,k[m]])}},call:function(j,k,l){var m=j.plugins[k];if(!m||!j.element[0].parentNode){return}for(var n=0;n<m.length;n++){j.options[m[n][0]]&&m[n][1].apply(j.element,l)}}},contains:function(c,d){return document.compareDocumentPosition?c.compareDocumentPosition(d)&16:c!==d&&c.contains(d)},hasScroll:function(a,j){if(e(a).css("overflow")==="hidden"){return !1}var k=j&&j==="left"?"scrollLeft":"scrollTop",l=!1;return a[k]>0?!0:(a[k]=1,l=a[k]>0,a[k]=0,l)},isOverAxis:function(d,j,k){return d>j&&d<j+k},isOver:function(a,j,k,l,m,n){return e.ui.isOverAxis(a,k,m)&&e.ui.isOverAxis(j,l,n)}})})(jQuery);
/* jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,f){if(e.cleanData){var h=e.cleanData;e.cleanData=function(a){for(var c=0,j;(j=a[c])!=null;c++){try{e(j).triggerHandler("remove")}catch(k){}}h(a)}}else{var i=e.fn.remove;e.fn.remove=function(a,d){return this.each(function(){return d||(!a||e.filter(a,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(c){}}),i.call(e(this),a,d)})}}e.widget=function(a,j,k){var l=a.split(".")[0],m;a=a.split(".")[1],m=l+"-"+a,k||(k=j,j=e.Widget),e.expr[":"][m]=function(b){return !!e.data(b,a)},e[l]=e[l]||{},e[l][a]=function(c,d){arguments.length&&this._createWidget(c,d)};var n=new j;n.options=e.extend(!0,{},n.options),e[l][a].prototype=e.extend(!0,n,{namespace:l,widgetName:a,widgetEventPrefix:e[l][a].prototype.widgetEventPrefix||a,widgetBaseClass:m},k),e.widget.bridge(a,e[l][a])},e.widget.bridge=function(a,b){e.fn[a]=function(c){var d=typeof c=="string",j=Array.prototype.slice.call(arguments,1),k=this;return c=!d&&j.length?e.extend.apply(null,[!0,c].concat(j)):c,d&&c.charAt(0)==="_"?k:(d?this.each(function(){var l=e.data(this,a),m=l&&e.isFunction(l[c])?l[c].apply(l,j):l;if(m!==l&&m!==f){return k=m,!1}}):this.each(function(){var l=e.data(this,a);l?l.option(c||{})._init():e.data(this,a,new b(c,this))}),k)}},e.Widget=function(c,d){arguments.length&&this._createWidget(c,d)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,j){e.data(j,this.widgetName,this),this.element=e(j),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),a);var k=this;this.element.bind("remove."+this.widgetName,function(){k.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,b){var j=a;if(arguments.length===0){return e.extend({},this.options)}if(typeof a=="string"){if(b===f){return this.options[a]}j={},j[a]=b}return this._setOptions(j),this},_setOptions:function(a){var d=this;return e.each(a,function(c,j){d._setOption(c,j)}),this},_setOption:function(c,d){return this.options[c]=d,c==="disabled"&&this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",d),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,j,k){var l,m,n=this.options[a];k=k||{},j=e.Event(j),j.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),j.target=this.element[0],m=j.originalEvent;if(m){for(l in m){l in j||(j[l]=m[l])}}return this.element.trigger(j,k),!(e.isFunction(n)&&n.call(this.element[0],j,k)===!1||j.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,e){var f=!1;d(document).mouseup(function(b){f=!1}),d.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===d.data(b.target,a.widgetName+".preventClickEvent")){return d.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(f){return}this._mouseStarted&&this._mouseUp(a),this._mouseDownEvent=a;var c=this,h=a.which==1,i=typeof this.options.cancel=="string"&&a.target.nodeName?d(a.target).closest(this.options.cancel).length:!1;if(!h||i||!this._mouseCapture(a)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==!1;if(!this._mouseStarted){return a.preventDefault(),!0}}return !0===d.data(a.target,this.widgetName+".preventClickEvent")&&d.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return c._mouseMove(b)},this._mouseUpDelegate=function(b){return c._mouseUp(b)},d(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.preventDefault(),f=!0,!0},_mouseMove:function(a){return !d.browser.msie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&d.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/* jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(i,j){i.ui=i.ui||{};var k=/left|center|right/,l=/top|center|bottom/,m="center",n={},o=i.fn.position,p=i.fn.offset;i.fn.position=function(a){if(!a||!a.of){return o.apply(this,arguments)}a=i.extend({},a);var c=i(a.of),d=c[0],e=(a.collision||"flip").split(" "),f=a.offset?a.offset.split(" "):[0,0],q,r,s;return d.nodeType===9?(q=c.width(),r=c.height(),s={top:0,left:0}):d.setTimeout?(q=c.width(),r=c.height(),s={top:c.scrollTop(),left:c.scrollLeft()}):d.preventDefault?(a.at="left top",q=r=0,s={top:a.of.pageY,left:a.of.pageX}):(q=c.outerWidth(),r=c.outerHeight(),s=c.offset()),i.each(["my","at"],function(){var b=(a[this]||"").split(" ");b.length===1&&(b=k.test(b[0])?b.concat([m]):l.test(b[0])?[m].concat(b):[m,m]),b[0]=k.test(b[0])?b[0]:m,b[1]=l.test(b[1])?b[1]:m,a[this]=b}),e.length===1&&(e[1]=e[0]),f[0]=parseInt(f[0],10)||0,f.length===1&&(f[1]=f[0]),f[1]=parseInt(f[1],10)||0,a.at[0]==="right"?s.left+=q:a.at[0]===m&&(s.left+=q/2),a.at[1]==="bottom"?s.top+=r:a.at[1]===m&&(s.top+=r/2),s.left+=f[0],s.top+=f[1],this.each(function(){var b=i(this),t=b.outerWidth(),u=b.outerHeight(),v=parseInt(i.curCSS(this,"marginLeft",!0))||0,w=parseInt(i.curCSS(this,"marginTop",!0))||0,x=t+v+(parseInt(i.curCSS(this,"marginRight",!0))||0),y=u+w+(parseInt(i.curCSS(this,"marginBottom",!0))||0),z=i.extend({},s),A;a.my[0]==="right"?z.left-=t:a.my[0]===m&&(z.left-=t/2),a.my[1]==="bottom"?z.top-=u:a.my[1]===m&&(z.top-=u/2),n.fractions||(z.left=Math.round(z.left),z.top=Math.round(z.top)),A={left:z.left-v,top:z.top-w},i.each(["left","top"],function(h,B){i.ui.position[e[h]]&&i.ui.position[e[h]][B](z,{targetWidth:q,targetHeight:r,elemWidth:t,elemHeight:u,collisionPosition:A,collisionWidth:x,collisionHeight:y,offset:f,my:a.my,at:a.at})}),i.fn.bgiframe&&b.bgiframe(),b.offset(i.extend(z,{using:a.using}))})},i.ui.position={fit:{left:function(a,f){var h=i(window),q=f.collisionPosition.left+f.collisionWidth-h.width()-h.scrollLeft();a.left=q>0?a.left-q:Math.max(a.left-f.collisionPosition.left,a.left)},top:function(a,f){var h=i(window),q=f.collisionPosition.top+f.collisionHeight-h.height()-h.scrollTop();a.top=q>0?a.top-q:Math.max(a.top-f.collisionPosition.top,a.top)}},flip:{left:function(a,e){if(e.at[0]===m){return}var q=i(window),r=e.collisionPosition.left+e.collisionWidth-q.width()-q.scrollLeft(),s=e.my[0]==="left"?-e.elemWidth:e.my[0]==="right"?e.elemWidth:0,t=e.at[0]==="left"?e.targetWidth:-e.targetWidth,u=-2*e.offset[0];a.left+=e.collisionPosition.left<0?s+t+u:r>0?s+t+u:0},top:function(a,e){if(e.at[1]===m){return}var q=i(window),r=e.collisionPosition.top+e.collisionHeight-q.height()-q.scrollTop(),s=e.my[1]==="top"?-e.elemHeight:e.my[1]==="bottom"?e.elemHeight:0,t=e.at[1]==="top"?e.targetHeight:-e.targetHeight,u=-2*e.offset[1];a.top+=e.collisionPosition.top<0?s+t+u:r>0?s+t+u:0}}},i.offset.setOffset||(i.offset.setOffset=function(a,q){/static/.test(i.curCSS(a,"position"))&&(a.style.position="relative");var r=i(a),s=r.offset(),t=parseInt(i.curCSS(a,"top",!0),10)||0,u=parseInt(i.curCSS(a,"left",!0),10)||0,v={top:q.top-s.top+t,left:q.left-s.left+u};"using" in q?q.using.call(a,v):r.css(v)},i.fn.offset=function(a){var d=this[0];return !d||!d.ownerDocument?null:a?i.isFunction(a)?this.each(function(b){i(this).offset(a.call(this,b,i(this).offset()))}):this.each(function(){i.offset.setOffset(this,a)}):p.call(this)}),i.curCSS||(i.curCSS=i.css),function(){var a=document.getElementsByTagName("body")[0],f=document.createElement("div"),q,r,s,t,u;q=document.createElement(a?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&i.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(var v in s){q.style[v]=s[v]}q.appendChild(f),r=a||document.documentElement,r.insertBefore(q,r.firstChild),f.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",t=i(f).offset(function(c,d){return d}).offset(),q.innerHTML="",r.removeChild(q),u=t.top+t.left+(a?2000:0),n.fractions=u>21&&u<22}()})(jQuery);
/* jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var e=this.options;return this.helper||e.disabled||c(a.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(a),this.handle?(e.iframeFix&&c(e.iframeFix===!0?"iframe":e.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(c(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var e=this.options;return this.helper=this._createHelper(a),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),c.ui.ddmanager&&(c.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a),this._mouseDrag(a,!0),c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,e){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!e){var f=this._uiHash();if(this._trigger("drag",a,f)===!1){return this._mouseUp({}),!1}this.position=f.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return c.ui.ddmanager&&c.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var h=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(h=c.ui.ddmanager.drop(this,a)),this.dropped&&(h=this.dropped,this.dropped=!1);var i=this.element[0],j=!1;while(i&&(i=i.parentNode)){i==document&&(j=!0)}if(!j&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!h||this.options.revert=="valid"&&h||this.options.revert===!0||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,h)){var k=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){k._trigger("stop",a)!==!1&&k._clear()})}else{this._trigger("stop",a)!==!1&&this._clear()}return !1},_mouseUp:function(a){return this.options.iframeFix===!0&&c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,a),c.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var e=!this.options.handle||!c(this.options.handle,this.element).length?!0:!1;return c(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(e=!0)}),e},_createHelper:function(a){var e=this.options,f=c.isFunction(e.helper)?c(e.helper.apply(this.element[0],[a])):e.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return f.parents("body").length||f.appendTo(e.appendTo=="parent"?this.element[0].parentNode:e.appendTo),f[0]!=this.element[0]&&!/(fixed|absolute)/.test(f.css("position"))&&f.css("position","absolute"),f},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),c.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.browser.msie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window"){this.containment=[a.containment=="document"?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:c(window).scrollLeft())+c(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:c(window).scrollTop())+(c(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var h=c(a.containment),i=h[0];if(!i){return}var j=h.offset(),k=c(i).css("overflow")!="hidden";this.containment=[(parseInt(c(i).css("borderLeftWidth"),10)||0)+(parseInt(c(i).css("paddingLeft"),10)||0),(parseInt(c(i).css("borderTopWidth"),10)||0)+(parseInt(c(i).css("paddingTop"),10)||0),(k?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(c(i).css("borderLeftWidth"),10)||0)-(parseInt(c(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(k?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(c(i).css("borderTopWidth"),10)||0)-(parseInt(c(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=h}else{a.containment.constructor==Array&&(this.containment=a.containment)}},_convertPositionTo:function(a,h){h||(h=this.position);var i=a=="absolute"?1:-1,j=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(k[0].tagName);return{top:h.top+this.offset.relative.top*i+this.offset.parent.top*i-(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:k.scrollTop())*i),left:h.left+this.offset.relative.left*i+this.offset.parent.left*i-(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:k.scrollLeft())*i)}},_generatePosition:function(a){var l=this.options,m=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,n=/(html|body)/i.test(m[0].tagName),o=a.pageX,p=a.pageY;if(this.originalPosition){var q;if(this.containment){if(this.relative_container){var r=this.relative_container.offset();q=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]}else{q=this.containment}a.pageX-this.offset.click.left<q[0]&&(o=q[0]+this.offset.click.left),a.pageY-this.offset.click.top<q[1]&&(p=q[1]+this.offset.click.top),a.pageX-this.offset.click.left>q[2]&&(o=q[2]+this.offset.click.left),a.pageY-this.offset.click.top>q[3]&&(p=q[3]+this.offset.click.top)}if(l.grid){var s=l.grid[1]?this.originalPageY+Math.round((p-this.originalPageY)/l.grid[1])*l.grid[1]:this.originalPageY;p=q?s-this.offset.click.top<q[1]||s-this.offset.click.top>q[3]?s-this.offset.click.top<q[1]?s+l.grid[1]:s-l.grid[1]:s:s;var t=l.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/l.grid[0])*l.grid[0]:this.originalPageX;o=q?t-this.offset.click.left<q[0]||t-this.offset.click.left>q[2]?t-this.offset.click.left<q[0]?t+l.grid[0]:t-l.grid[0]:t:t}}return{top:p-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():n?0:m.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():n?0:m.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(a,e,f){return f=f||this._uiHash(),c.ui.plugin.call(this,a,[e,f]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),c.Widget.prototype._trigger.call(this,a,e,f)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),c.extend(c.ui.draggable,{version:"1.8.23"}),c.ui.plugin.add("draggable","connectToSortable",{start:function(a,h){var i=c(this).data("draggable"),j=i.options,k=c.extend({},h,{item:i.element});i.sortables=[],c(j.connectToSortable).each(function(){var b=c.data(this,"sortable");b&&!b.options.disabled&&(i.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,k))})},stop:function(a,f){var h=c(this).data("draggable"),i=c.extend({},f,{item:h.element});c.each(h.sortables,function(){this.instance.isOver?(this.instance.isOver=0,h.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,h.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,i))})},drag:function(a,h){var i=c(this).data("draggable"),j=this,k=function(l){var m=this.offset.click.top,n=this.offset.click.left,o=this.positionAbs.top,p=this.positionAbs.left,q=l.height,r=l.width,s=l.top,t=l.left;return c.ui.isOver(o+m,p+n,s,t,q,r)};c.each(i.sortables,function(b){this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(j).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return h.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",a),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",a),i.dropped=!1)})}}),c.ui.plugin.add("draggable","cursor",{start:function(a,f){var h=c("body"),i=c(this).data("draggable").options;h.css("cursor")&&(i._cursor=h.css("cursor")),h.css("cursor",i.cursor)},stop:function(a,e){var f=c(this).data("draggable").options;f._cursor&&c("body").css("cursor",f._cursor)}}),c.ui.plugin.add("draggable","opacity",{start:function(a,f){var h=c(f.helper),i=c(this).data("draggable").options;h.css("opacity")&&(i._opacity=h.css("opacity")),h.css("opacity",i.opacity)},stop:function(a,e){var f=c(this).data("draggable").options;f._opacity&&c(e.helper).css("opacity",f._opacity)}}),c.ui.plugin.add("draggable","scroll",{start:function(a,e){var f=c(this).data("draggable");f.scrollParent[0]!=document&&f.scrollParent[0].tagName!="HTML"&&(f.overflowOffset=f.scrollParent.offset())},drag:function(a,h){var i=c(this).data("draggable"),j=i.options,k=!1;if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML"){if(!j.axis||j.axis!="x"){i.overflowOffset.top+i.scrollParent[0].offsetHeight-a.pageY<j.scrollSensitivity?i.scrollParent[0].scrollTop=k=i.scrollParent[0].scrollTop+j.scrollSpeed:a.pageY-i.overflowOffset.top<j.scrollSensitivity&&(i.scrollParent[0].scrollTop=k=i.scrollParent[0].scrollTop-j.scrollSpeed)}if(!j.axis||j.axis!="y"){i.overflowOffset.left+i.scrollParent[0].offsetWidth-a.pageX<j.scrollSensitivity?i.scrollParent[0].scrollLeft=k=i.scrollParent[0].scrollLeft+j.scrollSpeed:a.pageX-i.overflowOffset.left<j.scrollSensitivity&&(i.scrollParent[0].scrollLeft=k=i.scrollParent[0].scrollLeft-j.scrollSpeed)}}else{if(!j.axis||j.axis!="x"){a.pageY-c(document).scrollTop()<j.scrollSensitivity?k=c(document).scrollTop(c(document).scrollTop()-j.scrollSpeed):c(window).height()-(a.pageY-c(document).scrollTop())<j.scrollSensitivity&&(k=c(document).scrollTop(c(document).scrollTop()+j.scrollSpeed))}if(!j.axis||j.axis!="y"){a.pageX-c(document).scrollLeft()<j.scrollSensitivity?k=c(document).scrollLeft(c(document).scrollLeft()-j.scrollSpeed):c(window).width()-(a.pageX-c(document).scrollLeft())<j.scrollSensitivity&&(k=c(document).scrollLeft(c(document).scrollLeft()+j.scrollSpeed))}}k!==!1&&c.ui.ddmanager&&!j.dropBehaviour&&c.ui.ddmanager.prepareOffsets(i,a)}}),c.ui.plugin.add("draggable","snap",{start:function(a,f){var h=c(this).data("draggable"),i=h.options;h.snapElements=[],c(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var e=c(this),j=e.offset();this!=h.element[0]&&h.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:j.top,left:j.left})})},drag:function(a,u){var v=c(this).data("draggable"),w=v.options,x=w.snapTolerance,y=u.offset.left,z=y+v.helperProportions.width,A=u.offset.top,B=A+v.helperProportions.height;for(var C=v.snapElements.length-1;C>=0;C--){var D=v.snapElements[C].left,E=D+v.snapElements[C].width,F=v.snapElements[C].top,G=F+v.snapElements[C].height;if(!(D-x<y&&y<E+x&&F-x<A&&A<G+x||D-x<y&&y<E+x&&F-x<B&&B<G+x||D-x<z&&z<E+x&&F-x<A&&A<G+x||D-x<z&&z<E+x&&F-x<B&&B<G+x)){v.snapElements[C].snapping&&v.options.snap.release&&v.options.snap.release.call(v.element,a,c.extend(v._uiHash(),{snapItem:v.snapElements[C].item})),v.snapElements[C].snapping=!1;continue}if(w.snapMode!="inner"){var H=Math.abs(F-B)<=x,I=Math.abs(G-A)<=x,J=Math.abs(D-z)<=x,K=Math.abs(E-y)<=x;H&&(u.position.top=v._convertPositionTo("relative",{top:F-v.helperProportions.height,left:0}).top-v.margins.top),I&&(u.position.top=v._convertPositionTo("relative",{top:G,left:0}).top-v.margins.top),J&&(u.position.left=v._convertPositionTo("relative",{top:0,left:D-v.helperProportions.width}).left-v.margins.left),K&&(u.position.left=v._convertPositionTo("relative",{top:0,left:E}).left-v.margins.left)}var L=H||I||J||K;if(w.snapMode!="outer"){var H=Math.abs(F-A)<=x,I=Math.abs(G-B)<=x,J=Math.abs(D-y)<=x,K=Math.abs(E-z)<=x;H&&(u.position.top=v._convertPositionTo("relative",{top:F,left:0}).top-v.margins.top),I&&(u.position.top=v._convertPositionTo("relative",{top:G-v.helperProportions.height,left:0}).top-v.margins.top),J&&(u.position.left=v._convertPositionTo("relative",{top:0,left:D}).left-v.margins.left),K&&(u.position.left=v._convertPositionTo("relative",{top:0,left:E-v.helperProportions.width}).left-v.margins.left)}!v.snapElements[C].snapping&&(H||I||J||K||L)&&v.options.snap.snap&&v.options.snap.snap.call(v.element,a,c.extend(v._uiHash(),{snapItem:v.snapElements[C].item})),v.snapElements[C].snapping=H||I||J||K||L}}}),c.ui.plugin.add("draggable","stack",{start:function(a,h){var i=c(this).data("draggable").options,j=c.makeArray(c(i.stack)).sort(function(e,f){return(parseInt(c(e).css("zIndex"),10)||0)-(parseInt(c(f).css("zIndex"),10)||0)});if(!j.length){return}var k=parseInt(j[0].style.zIndex)||0;c(j).each(function(b){this.style.zIndex=k+b}),this[0].style.zIndex=k+j.length}}),c.ui.plugin.add("draggable","zIndex",{start:function(a,f){var h=c(f.helper),i=c(this).data("draggable").options;h.css("zIndex")&&(i._zIndex=h.css("zIndex")),h.css("zIndex",i.zIndex)},stop:function(a,e){var f=c(this).data("draggable").options;f._zIndex&&c(e.helper).css("zIndex",f._zIndex)}})})(jQuery);
/* jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,e=a.accept;this.isover=0,this.isout=1,this.accept=c.isFunction(e)?e:function(b){return b.is(e)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},c.ui.ddmanager.droppables[a.scope]=c.ui.ddmanager.droppables[a.scope]||[],c.ui.ddmanager.droppables[a.scope].push(this),a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var a=c.ui.ddmanager.droppables[this.options.scope];for(var e=0;e<a.length;e++){a[e]==this&&a.splice(e,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(a,e){a=="accept"&&(this.accept=c.isFunction(e)?e:function(b){return b.is(e)}),c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var e=c.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",a,this.ui(e))},_deactivate:function(a){var e=c.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",a,this.ui(e))},_over:function(a){var e=c.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",a,this.ui(e)))},_out:function(a){var e=c.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(e)))},_drop:function(a,f){var h=f||c.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return !1}var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=c.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==h.options.scope&&e.accept.call(e.element[0],h.currentItem||h.element)&&c.ui.intersect(h,c.extend(e,{offset:e.element.offset()}),e.options.tolerance)){return i=!0,!1}}),i?!1:this.accept.call(this.element[0],h.currentItem||h.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(h)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),c.extend(c.ui.droppable,{version:"1.8.23"}),c.ui.intersect=function(a,p,q){if(!p.offset){return !1}var r=(a.positionAbs||a.position.absolute).left,s=r+a.helperProportions.width,t=(a.positionAbs||a.position.absolute).top,u=t+a.helperProportions.height,v=p.offset.left,w=v+p.proportions.width,x=p.offset.top,y=x+p.proportions.height;switch(q){case"fit":return v<=r&&s<=w&&x<=t&&u<=y;case"intersect":return v<r+a.helperProportions.width/2&&s-a.helperProportions.width/2<w&&x<t+a.helperProportions.height/2&&u-a.helperProportions.height/2<y;case"pointer":var z=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,A=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,B=c.ui.isOver(A,z,x,v,p.proportions.height,p.proportions.width);return B;case"touch":return(t>=x&&t<=y||u>=x&&u<=y||t<x&&u>y)&&(r>=v&&r<=w||s>=v&&s<=w||r<v&&s>w);default:return !1}},c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,j){var k=c.ui.ddmanager.droppables[a.options.scope]||[],l=j?j.type:null,m=(a.currentItem||a.element).find(":data(droppable)").andSelf();g:for(var n=0;n<k.length;n++){if(k[n].options.disabled||a&&!k[n].accept.call(k[n].element[0],a.currentItem||a.element)){continue}for(var o=0;o<m.length;o++){if(m[o]==k[n].element[0]){k[n].proportions.height=0;continue g}}k[n].visible=k[n].element.css("display")!="none";if(!k[n].visible){continue}l=="mousedown"&&k[n]._activate.call(k[n],j),k[n].offset=k[n].element.offset(),k[n].proportions={width:k[n].element[0].offsetWidth,height:k[n].element[0].offsetHeight}}},drop:function(a,e){var f=!1;return c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&c.ui.intersect(a,this,this.options.tolerance)&&(f=this._drop.call(this,e)||f),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,e))}),f},dragStart:function(a,e){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||c.ui.ddmanager.prepareOffsets(a,e)})},drag:function(a,e){a.options.refreshPositions&&c.ui.ddmanager.prepareOffsets(a,e),c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var b=c.ui.intersect(a,this,this.options.tolerance),h=!b&&this.isover==1?"isout":b&&this.isover==0?"isover":null;if(!h){return}var i;if(this.options.greedy){var j=this.element.parents(":data(droppable):eq(0)");j.length&&(i=c.data(j[0],"droppable"),i.greedyChild=h=="isover"?1:0)}i&&h=="isover"&&(i.isover=0,i.isout=1,i._out.call(i,e)),this[h]=1,this[h=="isout"?"isover":"isout"]=0,this[h=="isover"?"_over":"_out"].call(this,e),i&&h=="isout"&&(i.isout=0,i.isover=1,i._over.call(i,e))})},dragStop:function(a,e){a.element.parents(":not(body,html)").unbind("scroll.droppable"),a.options.refreshPositions||c.ui.ddmanager.prepareOffsets(a,e)}}})(jQuery);
/* jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,f){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var a=this,j=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!j.aspectRatio,aspectRatio:j.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:j.helper||j.ghost||j.animate?j.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=j.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var k=this.handles.split(",");this.handles={};for(var l=0;l<k.length;l++){var m=e.trim(k[l]),n="ui-resizable-"+m,o=e('<div class="ui-resizable-handle '+n+'"></div>');o.css({zIndex:j.zIndex}),"se"==m&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[m]=".ui-resizable-"+m,this.element.append(o)}}this._renderAxis=function(p){p=p||this.element;for(var q in this.handles){this.handles[q].constructor==String&&(this.handles[q]=e(this.handles[q],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[q],this.element),s=0;s=/sw|ne|nw|se|n|s/.test(q)?r.outerHeight():r.outerWidth();var t=["padding",/ne|nw|n/.test(q)?"Top":/se|sw|s/.test(q)?"Bottom":/^e$/.test(q)?"Right":"Left"].join("");p.css(t,s),this._proportionallyResize()}if(!e(this.handles[q]).length){continue}}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!a.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}a.axis=b&&b[1]?b[1]:"se"}}),j.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(j.disabled){return}e(this).removeClass("ui-resizable-autohide"),a._handles.show()},function(){if(j.disabled){return}a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var a=function(c){e(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){a(this.element);var d=this.element;d.after(this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_mouseCapture:function(a){var j=!1;for(var k in this.handles){e(this.handles[k])[0]==a.target&&(j=!0)}return !this.options.disabled&&j},_mouseStart:function(a){var c=this.options,j=this.element.position(),k=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(k.is(".ui-draggable")||/absolute/.test(k.css("position")))&&k.css({position:"absolute",top:j.top,left:j.left}),this._renderProxy();var l=h(this.helper.css("left")),m=h(this.helper.css("top"));c.containment&&(l+=e(c.containment).scrollLeft()||0,m+=e(c.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:l,top:m},this.size=this._helper?{width:k.outerWidth(),height:k.outerHeight()}:{width:k.width(),height:k.height()},this.originalSize=this._helper?{width:k.outerWidth(),height:k.outerHeight()}:{width:k.width(),height:k.height()},this.originalPosition={left:l,top:m},this.sizeDiff={width:k.outerWidth()-k.width(),height:k.outerHeight()-k.height()},this.originalMousePosition={left:a.pageX,top:a.pageY},this.aspectRatio=typeof c.aspectRatio=="number"?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;var n=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",n=="auto"?this.axis+"-resize":n),k.addClass("ui-resizable-resizing"),this._propagate("start",a),!0},_mouseDrag:function(a){var o=this.helper,p=this.options,q={},r=this,s=this.originalMousePosition,t=this.axis,u=a.pageX-s.left||0,v=a.pageY-s.top||0,w=this._change[t];if(!w){return !1}var x=w.apply(this,[a,u,v]),y=e.browser.msie&&e.browser.version<7,z=this.sizeDiff;this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey){x=this._updateRatio(x,a)}return x=this._respectSize(x,a),this._propagate("resize",a),o.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(x),this._trigger("resize",a,this.ui()),!1},_mouseStop:function(a){this.resizing=!1;var l=this.options,m=this;if(this._helper){var n=this._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),p=o&&e.ui.hasScroll(n[0],"left")?0:m.sizeDiff.height,q=o?0:m.sizeDiff.width,r={width:m.helper.width()-q,height:m.helper.height()-p},s=parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left)||null,t=parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top)||null;l.animate||this.element.css(e.extend(r,{top:t,left:s})),m.helper.height(m.size.height),m.helper.width(m.size.width),this._helper&&!l.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",a),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(d){var j=this.options,k,l,m,n,o;o={minWidth:i(j.minWidth)?j.minWidth:0,maxWidth:i(j.maxWidth)?j.maxWidth:Infinity,minHeight:i(j.minHeight)?j.minHeight:0,maxHeight:i(j.maxHeight)?j.maxHeight:Infinity};if(this._aspectRatio||d){k=o.minHeight*this.aspectRatio,m=o.minWidth/this.aspectRatio,l=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,k>o.minWidth&&(o.minWidth=k),m>o.minHeight&&(o.minHeight=m),l<o.maxWidth&&(o.maxWidth=l),n<o.maxHeight&&(o.maxHeight=n)}this._vBoundaries=o},_updateCache:function(c){var d=this.options;this.offset=this.helper.offset(),i(c.left)&&(this.position.left=c.left),i(c.top)&&(this.position.top=c.top),i(c.height)&&(this.size.height=c.height),i(c.width)&&(this.size.width=c.width)},_updateRatio:function(d,j){var k=this.options,l=this.position,m=this.size,n=this.axis;return i(d.height)?d.width=d.height*this.aspectRatio:i(d.width)&&(d.height=d.width/this.aspectRatio),n=="sw"&&(d.left=l.left+(m.width-d.width),d.top=null),n=="nw"&&(d.top=l.top+(m.height-d.height),d.left=l.left+(m.width-d.width)),d},_respectSize:function(d,q){var r=this.helper,s=this._vBoundaries,t=this._aspectRatio||q.shiftKey,u=this.axis,v=i(d.width)&&s.maxWidth&&s.maxWidth<d.width,w=i(d.height)&&s.maxHeight&&s.maxHeight<d.height,x=i(d.width)&&s.minWidth&&s.minWidth>d.width,y=i(d.height)&&s.minHeight&&s.minHeight>d.height;x&&(d.width=s.minWidth),y&&(d.height=s.minHeight),v&&(d.width=s.maxWidth),w&&(d.height=s.maxHeight);var z=this.originalPosition.left+this.originalSize.width,A=this.position.top+this.size.height,B=/sw|nw|w/.test(u),C=/nw|ne|n/.test(u);x&&B&&(d.left=z-s.minWidth),v&&B&&(d.left=z-s.maxWidth),y&&C&&(d.top=A-s.minHeight),w&&C&&(d.top=A-s.maxHeight);var D=!d.width&&!d.height;return D&&!d.left&&d.top?d.top=null:D&&!d.top&&d.left&&(d.left=null),d},_proportionallyResize:function(){var a=this.options;if(!this._proportionallyResizeElements.length){return}var j=this.helper||this.element;for(var k=0;k<this._proportionallyResizeElements.length;k++){var l=this._proportionallyResizeElements[k];if(!this.borderDif){var m=[l.css("borderTopWidth"),l.css("borderRightWidth"),l.css("borderBottomWidth"),l.css("borderLeftWidth")],n=[l.css("paddingTop"),l.css("paddingRight"),l.css("paddingBottom"),l.css("paddingLeft")];this.borderDif=e.map(m,function(o,p){var q=parseInt(o,10)||0,r=parseInt(n[p],10)||0;return q+r})}if(!e.browser.msie||!e(j).is(":hidden")&&!e(j).parents(":hidden").length){l.css({height:j.height()-this.borderDif[0]-this.borderDif[2]||0,width:j.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var a=this.element,j=this.options;this.elementOffset=a.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var k=e.browser.msie&&e.browser.version<7,l=k?1:0,m=k?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+m,height:this.element.outerHeight()+m,position:"absolute",left:this.elementOffset.left-l+"px",top:this.elementOffset.top-l+"px",zIndex:++j.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(d,j,k){return{width:this.originalSize.width+j}},w:function(j,k,l){var m=this.options,n=this.originalSize,o=this.originalPosition;return{left:o.left+k,width:n.width-k}},n:function(j,k,l){var m=this.options,n=this.originalSize,o=this.originalPosition;return{top:o.top+l,height:n.height-l}},s:function(d,j,k){return{height:this.originalSize.height+k}},se:function(a,j,k){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,j,k]))},sw:function(a,j,k){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,j,k]))},ne:function(a,j,k){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,j,k]))},nw:function(a,j,k){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,j,k]))}},_propagate:function(a,d){e.ui.plugin.call(this,a,[d,this.ui()]),a!="resize"&&this._trigger(a,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.23"}),e.ui.plugin.add("resizable","alsoResize",{start:function(a,j){var k=e(this).data("resizable"),l=k.options,m=function(c){e(c).each(function(){var d=e(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10)})})};typeof l.alsoResize=="object"&&!l.alsoResize.parentNode?l.alsoResize.length?(l.alsoResize=l.alsoResize[0],m(l.alsoResize)):e.each(l.alsoResize,function(b){m(b)}):m(l.alsoResize)},resize:function(a,j){var k=e(this).data("resizable"),l=k.options,m=k.originalSize,n=k.originalPosition,o={height:k.size.height-m.height||0,width:k.size.width-m.width||0,top:k.position.top-n.top||0,left:k.position.left-n.left||0},p=function(c,q){e(c).each(function(){var d=e(this),r=e(this).data("resizable-alsoresize"),s={},t=q&&q.length?q:d.parents(j.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(t,function(u,v){var w=(r[v]||0)+(o[v]||0);w&&w>=0&&(s[v]=w||null)}),d.css(s)})};typeof l.alsoResize=="object"&&!l.alsoResize.nodeType?e.each(l.alsoResize,function(c,d){p(c,d)}):p(l.alsoResize)},stop:function(a,d){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(a,m){var n=e(this).data("resizable"),o=n.options,p=n._proportionallyResizeElements,q=p.length&&/textarea/i.test(p[0].nodeName),r=q&&e.ui.hasScroll(p[0],"left")?0:n.sizeDiff.height,s=q?0:n.sizeDiff.width,t={width:n.size.width-s,height:n.size.height-r},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,v=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(t,v&&u?{top:v,left:u}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var b={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};p&&p.length&&e(p[0]).css({width:b.width,height:b.height}),n._updateCache(b),n._propagate("resize",a)}})}}),e.ui.plugin.add("resizable","containment",{start:function(a,c){var q=e(this).data("resizable"),r=q.options,s=q.element,t=r.containment,u=t instanceof e?t.get(0):/parent/.test(t)?s.parent().get(0):t;if(!u){return}q.containerElement=e(u);if(/document/.test(t)||t==document){q.containerOffset={left:0,top:0},q.containerPosition={left:0,top:0},q.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{var v=e(u),w=[];e(["Top","Right","Left","Bottom"]).each(function(d,j){w[d]=h(v.css("padding"+j))}),q.containerOffset=v.offset(),q.containerPosition=v.position(),q.containerSize={height:v.innerHeight()-w[3],width:v.innerWidth()-w[1]};var x=q.containerOffset,y=q.containerSize.height,z=q.containerSize.width,A=e.ui.hasScroll(u,"left")?u.scrollWidth:z,B=e.ui.hasScroll(u)?u.scrollHeight:y;q.parentData={element:u,left:x.left,top:x.top,width:A,height:B}}},resize:function(a,q){var r=e(this).data("resizable"),s=r.options,t=r.containerSize,u=r.containerOffset,v=r.size,w=r.position,x=r._aspectRatio||a.shiftKey,y={top:0,left:0},z=r.containerElement;z[0]!=document&&/static/.test(z.css("position"))&&(y=u),w.left<(r._helper?u.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-u.left:r.position.left-y.left),x&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=s.helper?u.left:0),w.top<(r._helper?u.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-u.top:r.position.top),x&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?u.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var A=Math.abs((r._helper?r.offset.left-y.left:r.offset.left-y.left)+r.sizeDiff.width),B=Math.abs((r._helper?r.offset.top-y.top:r.offset.top-u.top)+r.sizeDiff.height),C=r.containerElement.get(0)==r.element.parent().get(0),D=/relative|absolute/.test(r.containerElement.css("position"));C&&D&&(A-=r.parentData.left),A+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-A,x&&(r.size.height=r.size.width/r.aspectRatio)),B+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-B,x&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(a,n){var o=e(this).data("resizable"),p=o.options,q=o.position,r=o.containerOffset,s=o.containerPosition,t=o.containerElement,u=e(o.helper),v=u.offset(),w=u.outerWidth()-o.sizeDiff.width,x=u.outerHeight()-o.sizeDiff.height;o._helper&&!p.animate&&/relative/.test(t.css("position"))&&e(this).css({left:v.left-s.left-r.left,width:w,height:x}),o._helper&&!p.animate&&/static/.test(t.css("position"))&&e(this).css({left:v.left-s.left-r.left,width:w,height:x})}}),e.ui.plugin.add("resizable","ghost",{start:function(a,j){var k=e(this).data("resizable"),l=k.options,m=k.size;k.ghost=k.originalElement.clone(),k.ghost.css({opacity:0.25,display:"block",position:"relative",height:m.height,width:m.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof l.ghost=="string"?l.ghost:""),k.ghost.appendTo(k.helper)},resize:function(a,j){var k=e(this).data("resizable"),l=k.options;k.ghost&&k.ghost.css({position:"relative",height:k.size.height,width:k.size.width})},stop:function(a,j){var k=e(this).data("resizable"),l=k.options;k.ghost&&k.helper&&k.helper.get(0).removeChild(k.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(a,m){var n=e(this).data("resizable"),o=n.options,p=n.size,q=n.originalSize,r=n.originalPosition,s=n.axis,t=o._aspectRatio||a.shiftKey;o.grid=typeof o.grid=="number"?[o.grid,o.grid]:o.grid;var u=Math.round((p.width-q.width)/(o.grid[0]||1))*(o.grid[0]||1),v=Math.round((p.height-q.height)/(o.grid[1]||1))*(o.grid[1]||1);/^(se|s|e)$/.test(s)?(n.size.width=q.width+u,n.size.height=q.height+v):/^(ne)$/.test(s)?(n.size.width=q.width+u,n.size.height=q.height+v,n.position.top=r.top-v):/^(sw)$/.test(s)?(n.size.width=q.width+u,n.size.height=q.height+v,n.position.left=r.left-u):(n.size.width=q.width+u,n.size.height=q.height+v,n.position.top=r.top-v,n.position.left=r.left-u)}});var h=function(b){return parseInt(b,10)||0},i=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/* jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.selectable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.widget("ui.selectable",c.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var a=this;this.element.addClass("ui-selectable"),this.dragged=!1;var e;this.refresh=function(){e=c(a.options.filter,a.element[0]),e.addClass("ui-selectee"),e.each(function(){var f=c(this),h=f.offset();c.data(this,"selectable-item",{element:this,$element:f,left:h.left,top:h.top,right:h.left+f.outerWidth(),bottom:h.top+f.outerHeight(),startselected:!1,selected:f.hasClass("ui-selected"),selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=c("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(a){var e=this;this.opos=[a.pageX,a.pageY];if(this.options.disabled){return}var f=this.options;this.selectees=c(f.filter,this.element[0]),this._trigger("start",a),c(f.appendTo).append(this.helper),this.helper.css({left:a.clientX,top:a.clientY,width:0,height:0}),f.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var b=c.data(this,"selectable-item");b.startselected=!0,!a.metaKey&&!a.ctrlKey&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,e._trigger("unselecting",a,{unselecting:b.element}))}),c(a.target).parents().andSelf().each(function(){var b=c.data(this,"selectable-item");if(b){var h=!a.metaKey&&!a.ctrlKey||!b.$element.hasClass("ui-selected");return b.$element.removeClass(h?"ui-unselecting":"ui-selected").addClass(h?"ui-selecting":"ui-unselecting"),b.unselecting=!h,b.selecting=h,b.selected=h,h?e._trigger("selecting",a,{selecting:b.element}):e._trigger("unselecting",a,{unselecting:b.element}),!1}})},_mouseDrag:function(a){var j=this;this.dragged=!0;if(this.options.disabled){return}var k=this.options,l=this.opos[0],m=this.opos[1],n=a.pageX,o=a.pageY;if(l>n){var p=n;n=l,l=p}if(m>o){var p=o;o=m,m=p}return this.helper.css({left:l,top:m,width:n-l,height:o-m}),this.selectees.each(function(){var b=c.data(this,"selectable-item");if(!b||b.element==j.element[0]){return}var e=!1;k.tolerance=="touch"?e=!(b.left>n||b.right<l||b.top>o||b.bottom<m):k.tolerance=="fit"&&(e=b.left>l&&b.right<n&&b.top>m&&b.bottom<o),e?(b.selected&&(b.$element.removeClass("ui-selected"),b.selected=!1),b.unselecting&&(b.$element.removeClass("ui-unselecting"),b.unselecting=!1),b.selecting||(b.$element.addClass("ui-selecting"),b.selecting=!0,j._trigger("selecting",a,{selecting:b.element}))):(b.selecting&&((a.metaKey||a.ctrlKey)&&b.startselected?(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.$element.addClass("ui-selected"),b.selected=!0):(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.startselected&&(b.$element.addClass("ui-unselecting"),b.unselecting=!0),j._trigger("unselecting",a,{unselecting:b.element}))),b.selected&&!a.metaKey&&!a.ctrlKey&&!b.startselected&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,j._trigger("unselecting",a,{unselecting:b.element})))}),!1},_mouseStop:function(a){var e=this;this.dragged=!1;var f=this.options;return c(".ui-unselecting",this.element[0]).each(function(){var b=c.data(this,"selectable-item");b.$element.removeClass("ui-unselecting"),b.unselecting=!1,b.startselected=!1,e._trigger("unselected",a,{unselected:b.element})}),c(".ui-selecting",this.element[0]).each(function(){var b=c.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected"),b.selecting=!1,b.selected=!0,b.startselected=!0,e._trigger("selected",a,{selected:b.element})}),this._trigger("stop",a),this.helper.remove(),!1}}),c.extend(c.ui.selectable,{version:"1.8.23"})})(jQuery);
/* jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,h){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",j={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},k={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};f.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var d=f(this).css(a).offset().top;d<0&&f(this).css("top",a.top-d)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var a=this,c=a.options,m=c.title||"&#160;",n=f.ui.dialog.getTitleId(a.element),o=(a.uiDialog=f("<div></div>")).appendTo(document.body).hide().addClass(i+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){c.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===f.ui.keyCode.ESCAPE&&(a.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(b){a.moveToTop(!1,b)}),p=a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),q=(a.uiDialogTitlebar=f("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o),r=f('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){r.addClass("ui-state-hover")},function(){r.removeClass("ui-state-hover")}).focus(function(){r.addClass("ui-state-focus")}).blur(function(){r.removeClass("ui-state-focus")}).click(function(b){return a.close(b),!1}).appendTo(q),s=(a.uiDialogTitlebarCloseText=f("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(r),t=f("<span></span>").addClass("ui-dialog-title").attr("id",n).html(m).prependTo(q);f.isFunction(c.beforeclose)&&!f.isFunction(c.beforeClose)&&(c.beforeClose=c.beforeclose),q.find("*").add(q).disableSelection(),c.draggable&&f.fn.draggable&&a._makeDraggable(),c.resizable&&f.fn.resizable&&a._makeResizable(),a._createButtons(c.buttons),a._isOpen=!1,f.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;return b.overlay&&b.overlay.destroy(),b.uiDialog.hide(),b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),b.uiDialog.remove(),b.originalTitle&&b.element.attr("title",b.originalTitle),b},widget:function(){return this.uiDialog},close:function(a){var l=this,m,n;if(!1===l._trigger("beforeClose",a)){return}return l.overlay&&l.overlay.destroy(),l.uiDialog.unbind("keypress.ui-dialog"),l._isOpen=!1,l.options.hide?l.uiDialog.hide(l.options.hide,function(){l._trigger("close",a)}):(l.uiDialog.hide(),l._trigger("close",a)),f.ui.dialog.overlay.resize(),l.options.modal&&(m=0,f(".ui-dialog").each(function(){this!==l.uiDialog[0]&&(n=f(this).css("z-index"),isNaN(n)||(m=Math.max(m,n)))}),f.ui.dialog.maxZ=m),l},isOpen:function(){return this._isOpen},moveToTop:function(a,l){var m=this,n=m.options,o;return n.modal&&!a||!n.stack&&!n.modal?m._trigger("focus",l):(n.zIndex>f.ui.dialog.maxZ&&(f.ui.dialog.maxZ=n.zIndex),m.overlay&&(f.ui.dialog.maxZ+=1,m.overlay.$el.css("z-index",f.ui.dialog.overlay.maxZ=f.ui.dialog.maxZ)),o={scrollTop:m.element.scrollTop(),scrollLeft:m.element.scrollLeft()},f.ui.dialog.maxZ+=1,m.uiDialog.css("z-index",f.ui.dialog.maxZ),m.element.attr(o),m._trigger("focus",l),m)},open:function(){if(this._isOpen){return}var a=this,e=a.options,l=a.uiDialog;return a.overlay=e.modal?new f.ui.dialog.overlay(a):null,a._size(),a._position(e.position),l.show(e.show),a.moveToTop(!0),e.modal&&l.bind("keydown.ui-dialog",function(m){if(m.keyCode!==f.ui.keyCode.TAB){return}var n=f(":tabbable",this),o=n.filter(":first"),p=n.filter(":last");if(m.target===p[0]&&!m.shiftKey){return o.focus(1),!1}if(m.target===o[0]&&m.shiftKey){return p.focus(1),!1}}),f(a.element.find(":tabbable").get().concat(l.find(".ui-dialog-buttonpane :tabbable").get().concat(l.get()))).eq(0).focus(),a._isOpen=!0,a._trigger("open"),a},_createButtons:function(a){var l=this,m=!1,n=f("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=f("<div></div>").addClass("ui-dialog-buttonset").appendTo(n);l.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof a=="object"&&a!==null&&f.each(a,function(){return !(m=!0)}),m&&(f.each(a,function(c,p){p=f.isFunction(p)?{click:p,text:c}:p;var q=f('<button type="button"></button>').click(function(){p.click.apply(l.element[0],arguments)}).appendTo(o);f.each(p,function(d,e){if(d==="click"){return}d in q?q[d](e):q.attr(d,e)}),f.fn.button&&q.button()}),n.appendTo(l.uiDialog))},_makeDraggable:function(){function o(b){return{position:b.position,offset:b.offset}}var a=this,l=a.options,m=f(document),n;a.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(b,c){n=l.height==="auto"?"auto":f(this).height(),f(this).height(f(this).height()).addClass("ui-dialog-dragging"),a._trigger("dragStart",b,o(c))},drag:function(b,d){a._trigger("drag",b,o(d))},stop:function(b,c){l.position=[c.position.left-m.scrollLeft(),c.position.top-m.scrollTop()],f(this).removeClass("ui-dialog-dragging").height(n),a._trigger("dragStop",b,o(c)),f.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function o(c){return{originalPosition:c.originalPosition,originalSize:c.originalSize,position:c.position,size:c.size}}a=a===h?this.options.resizable:a;var b=this,l=b.options,m=b.uiDialog.css("position"),n=typeof a=="string"?a:"n,e,s,w,se,sw,ne,nw";b.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:b.element,maxWidth:l.maxWidth,maxHeight:l.maxHeight,minWidth:l.minWidth,minHeight:b._minHeight(),handles:n,start:function(d,e){f(this).addClass("ui-dialog-resizing"),b._trigger("resizeStart",d,o(e))},resize:function(c,d){b._trigger("resize",c,o(d))},stop:function(d,e){f(this).removeClass("ui-dialog-resizing"),l.height=f(this).height(),l.width=f(this).width(),b._trigger("resizeStop",d,o(e)),f.ui.dialog.overlay.resize()}}).css("position",m).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(a){var l=[],m=[0,0],n;if(a){if(typeof a=="string"||typeof a=="object"&&"0" in a){l=a.split?a.split(" "):[a[0],a[1]],l.length===1&&(l[1]=l[0]),f.each(["left","top"],function(c,d){+l[c]===l[c]&&(m[c]=l[c],l[c]=d)}),a={my:l.join(" "),at:l.join(" "),offset:m.join(" ")}}a=f.extend({},f.ui.dialog.prototype.options.position,a)}else{a=f.ui.dialog.prototype.options.position}n=this.uiDialog.is(":visible"),n||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(f.extend({of:window},a)),n||this.uiDialog.hide()},_setOptions:function(a){var d=this,e={},l=!1;f.each(a,function(c,m){d._setOption(c,m),c in j&&(l=!0),c in k&&(e[c]=m)}),l&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,c){var l=this,m=l.uiDialog;switch(a){case"beforeclose":a="beforeClose";break;case"buttons":l._createButtons(c);break;case"closeText":l.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":m.removeClass(l.options.dialogClass).addClass(i+c);break;case"disabled":c?m.addClass("ui-dialog-disabled"):m.removeClass("ui-dialog-disabled");break;case"draggable":var n=m.is(":data(draggable)");n&&!c&&m.draggable("destroy"),!n&&c&&l._makeDraggable();break;case"position":l._position(c);break;case"resizable":var o=m.is(":data(resizable)");o&&!c&&m.resizable("destroy"),o&&typeof c=="string"&&m.resizable("option","handles",c),!o&&c!==!1&&l._makeResizable(c);break;case"title":f(".ui-dialog-title",l.uiDialogTitlebar).html(""+(c||"&#160;"))}f.Widget.prototype._setOption.apply(l,arguments)},_size:function(){var a=this.options,l,m,n=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),a.minWidth>a.width&&(a.width=a.minWidth),l=this.uiDialog.css({height:"auto",width:a.width}).height(),m=Math.max(0,a.minHeight-l);if(a.height==="auto"){if(f.support.minHeight){this.element.css({minHeight:m,height:"auto"})}else{this.uiDialog.show();var o=this.element.css("height","auto").height();n||this.uiDialog.hide(),this.element.height(Math.max(o,m))}}else{this.element.height(Math.max(a.height-l,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),f.extend(f.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(c){var d=c.attr("id");return d||(this.uuid+=1,d=this.uuid),"ui-dialog-title-"+d},overlay:function(a){this.$el=f.ui.dialog.overlay.create(a)}}),f.extend(f.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:f.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(a){this.instances.length===0&&(setTimeout(function(){f.ui.dialog.overlay.instances.length&&f(document).bind(f.ui.dialog.overlay.events,function(c){if(f(c.target).zIndex()<f.ui.dialog.overlay.maxZ){return !1}})},1),f(document).bind("keydown.dialog-overlay",function(b){a.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===f.ui.keyCode.ESCAPE&&(a.close(b),b.preventDefault())}),f(window).bind("resize.dialog-overlay",f.ui.dialog.overlay.resize));var d=(this.oldInstances.pop()||f("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return f.fn.bgiframe&&d.bgiframe(),this.instances.push(d),d},destroy:function(a){var e=f.inArray(a,this.instances);e!=-1&&this.oldInstances.push(this.instances.splice(e,1)[0]),this.instances.length===0&&f([document,window]).unbind(".dialog-overlay"),a.remove();var l=0;f.each(this.instances,function(){l=Math.max(l,this.css("z-index"))}),this.maxZ=l},height:function(){var a,d;return f.browser.msie&&f.browser.version<7?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<d?f(window).height()+"px":a+"px"):f(document).height()+"px"},width:function(){var a,d;return f.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),d=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<d?f(window).width()+"px":a+"px"):f(document).width()+"px"},resize:function(){var a=f([]);f.each(f.ui.dialog.overlay.instances,function(){a=a.add(this)}),a.css({width:0,height:0}).css({width:f.ui.dialog.overlay.width(),height:f.ui.dialog.overlay.height()})}}),f.extend(f.ui.dialog.overlay.prototype,{destroy:function(){f.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(a){var b=Math.abs,d=Math.max,e=Math.min,f=Math.round;function c(){return a("<div/>")}a.imgAreaSelect=function(N,ab){var n=a(N),Q,l=c(),g=c(),k=c().add(c()).add(c()).add(c()),p=c().add(c()).add(c()).add(c()),m=a([]),j,U,at,S={left:0,top:0},T,O,r,ac={left:0,top:0},aD=0,ad="absolute",ap,aq,af,ag,ae,Y,X,W,V,x,an,az,aB,aA,aC,ai={x1:0,y1:0,x2:0,y2:0,width:0,height:0},A=document.documentElement,q,z,M,aa,ax,K,t;function av(h){return h+S.left-ac.left}function aw(h){return h+S.top-ac.top}function aj(h){return h-S.left+ac.left}function ak(h){return h-S.top+ac.top}function G(h){return h.pageX-ac.left}function H(h){return h.pageY-ac.top}function J(h){var i=h||af,o=h||ag;return{x1:f(ai.x1*i),y1:f(ai.y1*o),x2:f(ai.x2*i),y2:f(ai.y2*o),width:f(ai.x2*i)-f(ai.x1*i),height:f(ai.y2*o)-f(ai.y1*o)}}function am(w,aF,aE,aG,h){var i=h||af,o=h||ag;ai={x1:f(w/i||0),y1:f(aF/o||0),x2:f(aE/i||0),y2:f(aG/o||0)};ai.width=ai.x2-ai.x1;ai.height=ai.y2-ai.y1}function s(){if(!n.width()){return}S={left:f(n.offset().left),top:f(n.offset().top)};T=n.innerWidth();O=n.innerHeight();S.top+=(n.outerHeight()-O)>>1;S.left+=(n.outerWidth()-T)>>1;Y=f(ab.minWidth/af)||0;X=f(ab.minHeight/ag)||0;W=f(e(ab.maxWidth/af||1<<24,T));V=f(e(ab.maxHeight/ag||1<<24,O));if(a().jquery=="1.3.2"&&ad=="fixed"&&!A.getBoundingClientRect){S.top+=d(document.body.scrollTop,A.scrollTop);S.left+=d(document.body.scrollLeft,A.scrollLeft)}ac=/absolute|relative/.test(r.css("position"))?{left:f(r.offset().left)-r.scrollLeft(),top:f(r.offset().top)-r.scrollTop()}:ad=="fixed"?{left:a(document).scrollLeft(),top:a(document).scrollTop()}:{left:0,top:0};U=av(0);at=aw(0);if(ai.x2>T||ai.y2>O){E()}}function au(h){if(!an){return}l.css({left:av(ai.x1),top:aw(ai.y1)}).add(g).width(ax=ai.width).height(K=ai.height);g.add(k).add(m).css({left:0,top:0});k.width(d(ax-k.outerWidth()+k.innerWidth(),0)).height(d(K-k.outerHeight()+k.innerHeight(),0));a(p[0]).css({left:U,top:at,width:ai.x1,height:O});a(p[1]).css({left:U+ai.x1,top:at,width:ax,height:ai.y1});a(p[2]).css({left:U+ai.x2,top:at,width:T-ai.x2,height:O});a(p[3]).css({left:U+ai.x1,top:at+ai.y2,width:ax,height:O-ai.y2});ax-=m.outerWidth();K-=m.outerHeight();switch(m.length){case 8:a(m[4]).css({left:ax>>1});a(m[5]).css({left:ax,top:K>>1});a(m[6]).css({left:ax>>1,top:K});a(m[7]).css({top:K>>1});case 4:m.slice(1,3).css({left:ax});m.slice(2,4).css({top:K})}if(h!==false){if(a.imgAreaSelect.keyPress!=B){a(document).unbind(a.imgAreaSelect.keyPress,a.imgAreaSelect.onKeyPress)}if(ab.keys){a(document)[a.imgAreaSelect.keyPress](a.imgAreaSelect.onKeyPress=B)}}if(a.browser.msie&&k.outerWidth()-k.innerWidth()==2){k.css("margin",0);setTimeout(function(){k.css("margin","auto")},0)}}function F(h){s();au(h);az=av(ai.x1);aB=aw(ai.y1);aA=av(ai.x2);aC=aw(ai.y2)}function L(h,i){ab.fadeSpeed?h.fadeOut(ab.fadeSpeed,i):h.hide()}function v(h){var i=aj(G(h))-ai.x1,o=ak(H(h))-ai.y1;if(!t){s();t=true;l.one("mouseout",function(){t=false})}ae="";if(ab.resizable){if(o<=ab.resizeMargin){ae="n"}else{if(o>=ai.height-ab.resizeMargin){ae="s"}}if(i<=ab.resizeMargin){ae+="w"}else{if(i>=ai.width-ab.resizeMargin){ae+="e"}}}l.css("cursor",ae?ae+"-resize":ab.movable?"move":"");if(j){j.toggle()}}function C(h){a("body").css("cursor","");if(ab.autoHide||ai.width*ai.height==0){L(l.add(p),function(){a(this).hide()})}a(document).unbind("mousemove",ah);l.mousemove(v);ab.onSelectEnd(N,J())}function u(h){if(h.which!=1){return false}s();if(ae){a("body").css("cursor",ae+"-resize");az=av(ai[/w/.test(ae)?"x2":"x1"]);aB=aw(ai[/n/.test(ae)?"y2":"y1"]);a(document).mousemove(ah).one("mouseup",C);l.unbind("mousemove",v)}else{if(ab.movable){ap=U+ai.x1-G(h);aq=at+ai.y1-H(h);l.unbind("mousemove",v);a(document).mousemove(Z).one("mouseup",function(){ab.onSelectEnd(N,J());a(document).unbind("mousemove",Z);l.mousemove(v)})}else{n.mousedown(h)}}return false}function I(h){if(x){if(h){aA=d(U,e(U+T,az+b(aC-aB)*x*(aA>az||-1)));aC=f(d(at,e(at+O,aB+b(aA-az)/x*(aC>aB||-1))));aA=f(aA)}else{aC=d(at,e(at+O,aB+b(aA-az)/x*(aC>aB||-1)));aA=f(d(U,e(U+T,az+b(aC-aB)*x*(aA>az||-1))));aC=f(aC)}}}function E(){az=e(az,U+T);aB=e(aB,at+O);if(b(aA-az)<Y){aA=az-Y*(aA<az||-1);if(aA<U){az=U+Y}else{if(aA>U+T){az=U+T-Y}}}if(b(aC-aB)<X){aC=aB-X*(aC<aB||-1);if(aC<at){aB=at+X}else{if(aC>at+O){aB=at+O-X}}}aA=d(U,e(aA,U+T));aC=d(at,e(aC,at+O));I(b(aA-az)<b(aC-aB)*x);if(b(aA-az)>W){aA=az-W*(aA<az||-1);I()}if(b(aC-aB)>V){aC=aB-V*(aC<aB||-1);I(true)}ai={x1:aj(e(az,aA)),x2:aj(d(az,aA)),y1:ak(e(aB,aC)),y2:ak(d(aB,aC)),width:b(aA-az),height:b(aC-aB)};au();ab.onSelectChange(N,J())}function ah(h){aA=/w|e|^$/.test(ae)||x?G(h):av(ai.x2);aC=/n|s|^$/.test(ae)||x?H(h):aw(ai.y2);E();return false}function D(h,i){aA=(az=h)+ai.width;aC=(aB=i)+ai.height;a.extend(ai,{x1:aj(az),y1:ak(aB),x2:aj(aA),y2:ak(aC)});au();ab.onSelectChange(N,J())}function Z(h){az=d(U,e(ap+G(h),U+T-ai.width));aB=d(at,e(aq+H(h),at+O-ai.height));D(az,aB);h.preventDefault();return false}function ao(){a(document).unbind("mousemove",ao);s();aA=az;aC=aB;E();ae="";if(!p.is(":visible")){l.add(p).hide().fadeIn(ab.fadeSpeed||0)}an=true;a(document).unbind("mouseup",y).mousemove(ah).one("mouseup",C);l.unbind("mousemove",v);ab.onSelectStart(N,J())}function y(){a(document).unbind("mousemove",ao).unbind("mouseup",y);L(l.add(p));am(aj(az),ak(aB),aj(az),ak(aB));if(!this instanceof a.imgAreaSelect){ab.onSelectChange(N,J());ab.onSelectEnd(N,J())}}function R(h){if(h.which!=1||p.is(":animated")){return false}s();ap=az=G(h);aq=aB=H(h);a(document).mousemove(ao).mouseup(y);return false}function ay(){F(false)}function P(){Q=true;al(ab=a.extend({classPrefix:"imgareaselect",movable:true,parent:"body",resizable:true,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},ab));l.add(p).css({visibility:""});if(ab.show){an=true;s();au();l.add(p).hide().fadeIn(ab.fadeSpeed||0)}setTimeout(function(){ab.onInit(N,J())},0)}var B=function(i){var o=ab.keys,h,aE,w=i.keyCode;h=!isNaN(o.alt)&&(i.altKey||i.originalEvent.altKey)?o.alt:!isNaN(o.ctrl)&&i.ctrlKey?o.ctrl:!isNaN(o.shift)&&i.shiftKey?o.shift:!isNaN(o.arrows)?o.arrows:10;if(o.arrows=="resize"||(o.shift=="resize"&&i.shiftKey)||(o.ctrl=="resize"&&i.ctrlKey)||(o.alt=="resize"&&(i.altKey||i.originalEvent.altKey))){switch(w){case 37:h=-h;case 39:aE=d(az,aA);az=e(az,aA);aA=d(aE+h,az);I();break;case 38:h=-h;case 40:aE=d(aB,aC);aB=e(aB,aC);aC=d(aE+h,aB);I(true);break;default:return}E()}else{az=e(az,aA);aB=e(aB,aC);switch(w){case 37:D(d(az-h,U),aB);break;case 38:D(az,d(aB-h,at));break;case 39:D(az+e(h,T-aj(aA)),aB);break;case 40:D(az,aB+e(h,O-ak(aC)));break;default:return}}return false};function ar(h,i){for(option in i){if(ab[option]!==undefined){h.css(i[option],ab[option])}}}function al(h){if(h.parent){(r=a(h.parent)).append(l.add(p))}a.extend(ab,h);s();if(h.handles!=null){m.remove();m=a([]);M=h.handles?h.handles=="corners"?4:8:0;while(M--){m=m.add(c())}m.addClass(ab.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:aD+1||1});if(!parseInt(m.css("width"))>=0){m.width(5).height(5)}if(aa=ab.borderWidth){m.css({borderWidth:aa,borderStyle:"solid"})}ar(m,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})}af=ab.imageWidth/T||1;ag=ab.imageHeight/O||1;if(h.x1!=null){am(h.x1,h.y1,h.x2,h.y2);h.show=!h.hide}if(h.keys){ab.keys=a.extend({shift:1,ctrl:"resize"},h.keys)}p.addClass(ab.classPrefix+"-outer");g.addClass(ab.classPrefix+"-selection");for(M=0;M++<4;){a(k[M-1]).addClass(ab.classPrefix+"-border"+M)}ar(g,{selectionColor:"background-color",selectionOpacity:"opacity"});ar(k,{borderOpacity:"opacity",borderWidth:"border-width"});ar(p,{outerColor:"background-color",outerOpacity:"opacity"});if(aa=ab.borderColor1){a(k[0]).css({borderStyle:"solid",borderColor:aa})}if(aa=ab.borderColor2){a(k[1]).css({borderStyle:"dashed",borderColor:aa})}l.append(g.add(k).add(j).add(m));if(a.browser.msie){if(aa=p.css("filter").match(/opacity=(\d+)/)){p.css("opacity",aa[1]/100)}if(aa=k.css("filter").match(/opacity=(\d+)/)){k.css("opacity",aa[1]/100)}}if(h.hide){L(l.add(p))}else{if(h.show&&Q){an=true;l.add(p).fadeIn(ab.fadeSpeed||0);F()}}x=(z=(ab.aspectRatio||"").split(/:/))[0]/z[1];n.add(p).unbind("mousedown",R);if(ab.disable||ab.enable===false){l.unbind("mousemove",v).unbind("mousedown",u);a(window).unbind("resize",ay)}else{if(ab.enable||ab.disable===false){if(ab.resizable||ab.movable){l.mousemove(v).mousedown(u)}a(window).resize(ay)}if(!ab.persistent){n.add(p).mousedown(R)}}ab.enable=ab.disable=undefined}this.remove=function(){al({disable:true});l.add(p).remove()};this.getOptions=function(){return ab};this.setOptions=al;this.getSelection=J;this.setSelection=am;this.cancelSelection=y;this.update=F;q=n;while(q.length){aD=d(aD,!isNaN(q.css("z-index"))?q.css("z-index"):aD);if(q.css("position")=="fixed"){ad="fixed"}q=q.parent(":not(body)")}aD=ab.zIndex||aD;if(a.browser.msie){n.attr("unselectable","on")}a.imgAreaSelect.keyPress=a.browser.msie||a.browser.safari?"keydown":"keypress";if(a.browser.opera){j=c().css({width:"100%",height:"100%",position:"absolute",zIndex:aD+2||2})}l.add(p).css({visibility:"hidden",position:ad,overflow:"hidden",zIndex:aD||"0"});l.css({zIndex:aD+2||2});g.add(k).css({position:"absolute",fontSize:0});N.complete||N.readyState=="complete"||!n.is("img")?P():n.one("load",P);if(a.browser.msie&&a.browser.version>=7){N.src=N.src}};a.fn.imgAreaSelect=function(g){g=g||{};this.each(function(){if(a(this).data("imgAreaSelect")){if(g.remove){a(this).data("imgAreaSelect").remove();a(this).removeData("imgAreaSelect")}else{a(this).data("imgAreaSelect").setOptions(g)}}else{if(!g.remove){if(g.enable===undefined&&g.disable===undefined){g.enable=true}a(this).data("imgAreaSelect",new a.imgAreaSelect(this,g))}}});if(g.instance){return a(this).data("imgAreaSelect")}return this}})(jQuery);function cnLength(d){var a=escape(d);var c=0;var b=a.length;for(i=0;i<b;i++){if(a.charAt(i)=="%"){if(a.charAt(++i)=="u"){c++}}}return d.length+c}function ltrim(a){return a.replace(/(^\s*)/g,"")}function rtrim(a){return a.replace(/(\s*$)/g,"")}function checkScriptStr(d){var a=false;var c="<|>|script|alert|{|}|#|$|'|\"|:|;|&|*|@@|%|^|?";var e=c.split("|");for(var b=0;b<e.length;b++){if(d.indexOf(e[b])!=-1){a=true;break}}return a};function createSelect(n,h,c,a,g){var m=document.getElementById(n);var l=document.getElementById(h);var k=document.getElementById(c);var e=new Date();if(a==1){MaxYear=e.getFullYear();MinYear=g;for(var f=MaxYear;f>=MinYear;f--){var j=document.createElement("OPTION");j.value=f;j.innerHTML=f;m.appendChild(j)}m.selectedIndex=0;for(var f=1;f<13;f++){var j=document.createElement("OPTION");j.value=f;j.innerHTML=f;l.appendChild(j)}}var b=new Date(m.value,l.value,0);var d=b.getDate();k.options.length=1;for(var f=1;f<=d;f++){var j=document.createElement("OPTION");j.value=f;j.innerHTML=f;k.appendChild(j)}};var RegexForName="^[a-zA-Z0-9_\\-\u4e00-\u9fa5]+$";function ShowCity(c){$("#City").empty().append($('<option value="">--市--</option>'));$("#Area").empty().append($('<option value="">--县/区--</option>'));if(c==""){$("#AddressHeadMessage").html("");return false}$("#AddressHeadMessage").html(c+",");var a="/User/GetCityData?province="+escape(c)+"&t="+Math.random().toString();$.getJSON(a,function(e){if(e!=""){var d=e.split("$");var g="";for(var f=0;f<d.length;f++){if(d[f]!=""){g+='<option value="'+d[f]+'">'+d[f]+"</option>"}}$("#City").append(g);if($.browser.msie&&($.browser.version=="7.0"||$.browser.version=="8.0")){$("#City").css("position","static").css("position","relative")}}})}function ShowArea(c){$("#Area").empty().append($('<option value="">--县/区--</option>'));var d=$("#Province").val();if(d!=""&&c!=""){$("#AddressHeadMessage").html(d+","+c+",")}else{if(d!=""){$("#AddressHeadMessage").html(d+",")}}if(d==""||c==""){return false}var a="/User/GetAreaData?province="+escape(d)+"&city="+escape(c)+"&t="+Math.random().toString();$.getJSON(a,function(f){if(f!=""){var e=f.split("$");var h="";for(var g=0;g<e.length;g++){if(e[g]!=""){h+='<option value="'+e[g]+'">'+e[g]+"</option>"}}$("#Area").append(h)}})}function GetPostalCodeNew(a,e,g){var c=a;var d=$("#"+e).val();var f=$("#"+g).val();if(f!=""&&d!=""&&c!=""){$("#AddressHeadMessage").html(f+","+d+","+c+",")}else{if(f!=""&&d!=""){$("#AddressHeadMessage").html(f+","+d+",")}}if(f!=""&&d!=""&&c!=""){LoadGetPostalCode(f,d,c)}else{$("#SetPostalCode").html("");$("#SetPhone").html("")}}function LoadGetPostalCode(f,e,d){var c="/DeliveryAddress/GetPostalCode";var a="povince="+encodeURI(f)+"&city="+encodeURI(e)+"&area="+encodeURI(d)+"&r="+Math.random();$.ajax({type:"POST",cache:false,timeout:10000,dataType:"text",url:c,data:a,success:function(i){if(i!=""&&i!=null){var j=i.split("$");var l=j[0];var h=j[1];var g=j[2];var k=j[3];var n=j[4];var m='&nbsp;参考邮编：<span class="reusableColor4">'+k+"</span>&nbsp;<span><a style='text-decoration:none' href=\"javascript:SetCode('"+k+"')\" >使用此邮编</a></span>";$("#SetPostalCode").html(m);$("#SetPhone").html('&nbsp;参考区号：<span class="reusableColor4">'+n+"</span>&nbsp;<span><a style='text-decoration:none' href=\"javascript:SetPhoneCode('"+n+"-')\" >使用此区号</a></span>")}}})}function SetCode(a){$("#PostalCode").val(a);$("#WrongPostalCode").hide();$("#PostalCode").css("color","#000000")}function SetPhoneCode(a){document.getElementById("Phone").value=a}function ShowV(a){if(a!=""){$("#AddressHeadArea").html(a+",")}}function showElement(a){$("#"+a).show()}function hideElement(a){$("#"+a).hide()}function ChecktheForm_Tel(){var d=$("#Province").find("option:selected").text();var a=false;if(d.indexOf("香港")>-1||d.indexOf("澳门")>-1||d.indexOf("台湾")>-1){a=true}var c=$.trim($("#Mobile").val());var f=$.trim($("#Phone").val());var e=true;if(!a){if(c!=""&&c.length!=11){$("#WrongMobile").show();$("#WrongMobile").html("<p>手机号码必须11位</p>");e=false}else{if(c!=""&&Check_Mobiles(c)==false){$("#WrongMobile").show();$("#WrongMobile").html("<p>请输入正确的手机号码</p>");e=false}else{$("#WrongMobile").hide()}}if(f!=""){if(f.length<7||f.length>16){$("#WrongPhone").show();$("#WrongPhone").html("<p>座机号码不能多于16位，不能少于7位</p>");e=false}else{if(Check_Tel(f)==false){$("#WrongPhone").html("<p>请输入正确的电话号码</p>");$("#WrongPhone").show();e=false}else{$("#WrongPhone").hide()}}}else{$("#WrongPhone").hide()}}else{if(c!=""&&c.length>11){$("#WrongMobile").show();$("#WrongMobile").html("<p>手机号码过长</p>");e=false}if(f!=""){if(f.length<7||f.length>16){$("#WrongPhone").show();$("#WrongPhone").html("<p>座机号码不能多于16位，不能少于7位</p>");e=false}else{$("#WrongPhone").hide()}}else{$("#WrongPhone").hide()}}return e}function Check_Tel(a){return/^((\d{3,4})\-{0,1}){0,1}(\d{7,8})(\-{0,1}\d{1,6}){0,1}$/.test(a)}function Check_Tel_HongKong(a){return/^(0\d{2,3}-)?[2,3]{1}\d{7}(-\d{1,6})?$/.test(a)}function Check_Mobiles(a){return/^((1)+\d{10})$/.test(a)}function Check_Mobiles_HongKong(a){return/^((5|6|9)+\d{7})$/.test(a)}function CheckOnBlur(e){var g=$("#"+e).val();g=$.trim(g);$("#"+e).val(g);if(e=="TrueName"){if((g!=""&&g.length<2)||g.length>20){if(g.length>20){$("#WrongTrueName").html("<p>真实姓名不能超过20字符</p>")}else{$("#WrongTrueName").html("<p>请填写您的姓名</p>")}showElement("WrongTrueName")}else{hideElement("WrongTrueName")}}else{if(e=="UniqueNickName"){hideElement("WrongUniqueNickName");if(g!=""){if(g.length>16){$("#WrongUniqueNickName").html("<p>昵称不能超过16字符</p>");showElement("WrongUniqueNickName")}var f=new RegExp(RegexForName);if(!f.test(g)){$("#WrongUniqueNickName").html('<p>支持中英文、数字或者"_"</p>');showElement("WrongUniqueNickName")}$.getJSON("/user/IsExistNickName?nickname="+escape(g),function(h){if(h.success==0){$("#WrongUniqueNickName").html("<p>"+h.msg+"</p>");showElement("WrongUniqueNickName")}})}else{hideElement("WrongUniqueNickName")}}else{if(e=="Email"){if(g!=""){if(g.length>50){$("#WrongEmail").html("<p>邮箱地址不能超过50字符</p>");showElement("WrongEmail")}else{if(!/^[\w-]+(\.[\w-]+)*@[\w-]+(\.(\w)+)*(\.(\w){2,3})$/.test(g)){$("#WrongEmail").html("<p>Email格式错误</p>");showElement("WrongEmail")}else{if(/(^.*@yahoo.com.cn$)|(^.*@yahoo.cn$)/.test(g.toLowerCase())){$("#WrongEmail").html("<p>中国雅虎邮箱将要停止服务，请改用其它邮箱</p>");showElement("WrongEmail")}else{hideElement("WrongEmail")}}}}else{hideElement("WrongEmail")}}else{if(e=="Address"){if((g!=""&&g.length<2)||g.length>100){if(g.length>100){$("#WrongAddress").html("<p>详细地址不能超过100字符</p>")}else{$("#WrongAddress").html("<p>请填写您的详细地址</p>")}showElement("WrongAddress")}else{hideElement("WrongAddress")}}else{if(e=="PostalCode"){if(!/^(\d){6}$/.test(g)&&g!=""){showElement("WrongPostalCode")}else{hideElement("WrongPostalCode")}}else{if(e=="Mobile"||e=="Phone"){ChecktheForm_Tel()}else{if(e=="bDay"){var d=$("#bYear").val();var c=$("#bMonth").val();var a=$("#bDay").val();if(d!=""){if(c==""||a==""){$("#WrongBirthDay").show()}else{$("#WrongBirthDay").hide()}}else{if(c!=""||a!=""){$("#WrongBirthDay").show()}else{$("#WrongBirthDay").hide()}}}}}}}}}}function CheckForm(){var f=true;var m=$("#TrueName").val();var e=$("#Email").val();var k=$("#Province").val();var d=$("#City").val();var c=$("#Area").val();var a=$("#Address").val();var j=$("#PostalCode").val();var g=$("#Mobile").val();var i=$("#Phone").val();var h=$("#UniqueNickName").val();a=$.trim(a);if(h!=""){if(h.length>16){$("#WrongUniqueNickName").html("<p>昵称不能超过16字符</p>");showElement("WrongUniqueNickName");f=false}var l=new RegExp(RegexForName);if(!l.test(h)){$("#WrongUniqueNickName").html('<p>支持中英文、数字或者"_"</p>');showElement("WrongUniqueNickName");f=false}$.ajax({type:"GET",async:false,cache:false,timeout:10000,dataType:"json",url:"/user/IsExistNickName?nickname="+escape(h),success:function(n){if(n.success==0){$("#WrongUniqueNickName").html("<p>"+n.msg+"</p>");showElement("WrongUniqueNickName");f=false}}})}else{$("#WrongUniqueNickName").html("<p>昵称不能为空</p>");showElement("WrongUniqueNickName");f=false}if(m!=""){if(m.length>20){$("#WrongTrueName").html("<p>真实姓名不能超过20字符</p>");showElement("WrongTrueName");f=false}else{if(m.length<2){$("#WrongTrueName").html("<p>请填写您的姓名</p>");showElement("WrongTrueName");f=false}else{hideElement("WrongTrueName")}}}else{hideElement("WrongTrueName")}if($("#Email").length>0){if(e!=""){if(e.length>50){$("#WrongEmail").html("<p>邮箱地址不能超过50字符</p>");showElement("WrongEmail");f=false}else{if(!/^[\w-]+(\.[\w-]+)*@[\w-]+(\.(\w)+)*(\.(\w){2,3})$/.test(e)){$("#WrongEmail").html("<p>Email格式错误</p>");showElement("WrongEmail");f=false}else{if(/(^.*@yahoo.com.cn$)|(^.*@yahoo.cn$)/.test(e)){$("#WrongEmail").html("<p>中国雅虎邮箱将要停止服务，请改用其它邮箱</p>");showElement("WrongEmail");f=false}else{hideElement("WrongEmail")}}}}else{hideElement("WrongEmail")}}if((a!=""&&a.length<2)||a.length>100){if(a.length>100){$("#WrongAddress").html("<p>详细地址不能超过100字符</p>")}else{$("#WrongAddress").html("<p>请填写您的详细地址</p>")}showElement("WrongAddress");f=false}else{hideElement("WrongAddress")}if(!/^(\d){6}$/.test(j)&&j!=""){showElement("WrongPostalCode");f=false}else{hideElement("WrongPostalCode")}if(!ChecktheForm_Tel()){f=false}return f}function SumbmitUserInfo(){if(!CheckForm()){return false}var p=$("#TrueName").val();var k=$("#UniqueNickName").val();var h=$("#Email").val();var n=$("#Province").val();var g=$("#City").val();var c=$("#Area").val();var a=$("#Address").val();var m=$("#PostalCode").val();var j=$("#Mobile").val();var l=$("#Phone").val();var o=$("input[name='Sex']:checked").val();var f=$("#bYear").val();var e=$("#bMonth").val();var d=$("#bDay").val();var i=$("#IsUserGetFullInfoPoint").val();if(i=="true"||i=="True"){PostData(o,f,e,d,p,k,h,n,g,c,a,m,j,l)}else{if(d==""||p==""||h==""||j==""||o==undefined){var q="";if(p==""){if(q==""){q="真实姓名"}else{q+=",真实姓名"}}if(o==undefined){if(q==""){q="性别"}else{q+=",性别"}}if(d==""){if(q==""){q="出生日期"}else{q+=",出生日期"}}if($("#Email").length>0){if(h==""){if(q==""){q="收件邮箱"}else{q+=",收件邮箱"}}}if($("#Mobile").length>0){if(j==""){if(q==""){q="手机"}else{q+=",手机"}}}}else{PostData(o,f,e,d,p,k,h,n,g,c,a,m,j,l)}}}function PostData(o,f,e,d,p,j,h,n,g,c,a,m,i,l){$("[fid=saving]").show();var k="&Sex="+o+"&bYear="+f+"&bMonth="+e+"&bDay="+d+"&TrueName="+p+"&UniqueNickName="+j+"&Province="+n+"&City="+g+"&Area="+c+"&Address="+a+"&PostalCode="+m+"&Phone="+l;if($("#Email").length>0){k+="&Email="+h}if($("#Mobile").length>0){k+="&Mobile="+i}var q="/User/EditUserInfo";$.ajax({type:"POST",cache:false,dataType:"text",jsonp:"callback",url:q,data:k,success:function(s){if(s!=""){if(s=="1"){HideSelect();$.fn.alert("更新成功",function(){ShowSelect()});var r=$("#bDay").val();if(r!=""){$("#bYear").attr("disabled","disabled");$("#bMonth").attr("disabled","disabled");$("#bDay").attr("disabled","disabled")}var t=$("#ReturnURL").val();if(t!=null&&t!=undefined&&t!=""){window.location.href=t}}else{HideSelect();switch(s){case"10":$.fn.alert("真实姓名不能为空！",function(){ShowSelect()});break;case"11":$.fn.alert("性别不能为空！",function(){ShowSelect()});break;case"12":$.fn.alert("出生日期不能为空！",function(){ShowSelect()});break;case"13":$.fn.alert("地区不能为空！",function(){ShowSelect()});break;case"14":$.fn.alert("详细地址不能为空！",function(){ShowSelect()});break;case"15":$.fn.alert("手机不能为空！",function(){ShowSelect()});break;default:$.fn.alert("更新失败！",function(){ShowSelect()})}}}else{HideSelect();$.fn.alert("网络有误,请稍后再试！",function(){ShowSelect()})}$("[fid=saving]").hide()},error:function(r){HideSelect();$.fn.alert("更新失败,请稍后再试！",function(){ShowSelect()});$("[fid=saving]").hide()}})}function selecteOption(c,d){try{c.val(d)}catch(a){setTimeout(function(){c.val(d)},1)}}function InitTime(a){createSelect("bYear","bMonth","bDay",1,1940)}function CallBack(){clearInterval(b);window.location.href="http://my.vancl.com/"}function InitValue(){var g=$("#Province").attr("data-province");var f=$("#City").attr("data-city");var a=$("#Area").attr("data-area");if(g!=""){$("#Province").val(g);$("#AddressHeadMessage").html(g+",")}if(g!=""&&f!=""){$("#City").val(f);$("#AddressHeadMessage").html(g+","+f+",")}if(g!=""&&f!=""&&a!=""){$("#Area").val(a);$("#AddressHeadMessage").html(g+","+f+","+a+",");LoadGetPostalCode(g,f,a)}var h=$("#txtSex").val();if(h==1){$("#female").attr("checked","checked")}else{if(h==2){$("#male").attr("checked","checked")}}var e=$("#bYear").attr("data-year");if(e!=""){selecteOption($("#bYear"),e);$("#bYear").attr("disabled","disabled")}var d=$("#bMonth").attr("data-month");if(d!=""){selecteOption($("#bMonth"),d);$("#bMonth").attr("disabled","disabled")}var c=$("#bDay").attr("data-day");if(c!=""){selecteOption($("#bDay"),c);$("#bDay").attr("disabled","disabled")}}function HideSelect(){var a=!-[1,]&&!window.XMLHttpRequest;if(a){$("#bYear").hide();$("#bMonth").hide();$("#bDay").hide();$("#Province").hide();$("#City").hide();$("#Area").hide()}}function ShowSelect(){var a=!-[1,]&&!window.XMLHttpRequest;if(a){$("#bYear").show();$("#bMonth").show();$("#bDay").show();$("#Province").show();$("#City").show();$("#Area").show()}}$(function(){InitTime();InitValue()});function selectChange(e,h){if(!h.width||!h.height){return}var a=$("#cutpic2");var d=e.height,i=e.width;var c=90;var f=90/h.width;var g=90/h.height;$(".finishnew img:eq(0)").css({width:Math.round(f*i),height:Math.round(g*d),marginLeft:-Math.round(f*h.x1),marginTop:-Math.round(g*h.y1)});a.find("#x1").val(h.x1);a.find("#y1").val(h.y1);a.find("#height").val(h.height);a.find("#width").val(h.width)}function imgInit(){var a=$("#cutpic2");var c=a.find("#photo");a.find("#photo").imgAreaSelect({handles:true,aspectRatio:"1:1",x1:0,y1:0,x2:minHW,y2:minHW,minHeight:minHW,minWidth:minHW,parent:a.find(".phototd"),persistent:true,movable:true,fadeSpeed:200,onInit:selectChange,onSelectChange:selectChange})}function setChangeAvatar(){var c=$("#hidcustomerPath").val();var a=$("#cutpic2");if(c!=""&&$("#AvatarType1").is(":checked")&&$("#LastUploadaction").val()!="vt"){}}function change(a){$("[fid=tipsaveimage]").hide();$("#monifile").val($("#fileupload").val());$(a).next().css({color:""});var d=/^(.*)\.(png|jpg|jpeg)$/i;if(a.value!=""){if(!d.test(a.value)){$(a).next().css({color:"red"});return}else{$(a).next().css({color:""})}}else{if($("#filePath").val()!=""){$(a).next().css({color:"red"});return}}var c=-1;if(a.files&&a.files[0]){c=a.files[0].fileSize;if(c>200*1024){$.fn.alert("您选择的文件大于200K，请选择小于200K的图片！")}else{change2(a)}}else{change2(a)}}function change2(c){var a=$("#cutpic2");a.find("#form1").ajaxSubmit({beforeSubmit:function(){a.find(".bigphoto>.mask").show();$("div[class^='imgareaselect']").hide()},success:function(d,g){$("[fid=msgsetavatar]").text("");var e=d.toString().split("<div")[0];var f=/http:\/\/([\w.]+\/?)\S/;if(!f.test(e)){if(e=="<pre></pre>"){$.fn.alert("图片加载失败，请稍候再传。")}else{$.fn.alert(e);if(e.indexOf("200K")>-1){$(c).next().css({color:"red"})}}}else{$("#filePath").val(e+"?t="+new Date().valueOf());$("#hidcustomerPath").val(e+"?t="+new Date().valueOf());a.find("img:lt(2)").attr("src",e+"?t="+new Date().valueOf());a.find("img:lt(2)").bind("load",function(){imgInit()})}a.find(".bigphoto>.mask").hide();$("div[class^='imgareaselect']").show()},error:function(d){$.fn.alert("网络有误,请稍后再试！")}})}function SaveImage(){$("[fid=tipsaveimage]").hide();var a=$("#cutpic2");if($("#filePath").val()==""){$("[fid=tipsaveimage]").text("请上传头像图片！").css("color","red").show();return}a.find("#form2").action="/user/_SaveAvatar";a.find("#form2").ajaxSubmit({beforeSubmit:function(){$(".maskall").show()},success:function(c,d){$(".maskall").hide();if(c>0){$("#LastUploadaction").val("image");$("[fid=tipsaveimage]").text("头像保存成功！").css("color","#666666").show();b=setTimeout(function(){$("[fid=tipsaveimage]").hide()},3000)}else{$("[fid=tipsaveimage]").text("头像保存失败！").css("color","red").show()}$("#ID").val(c)},error:function(){$(".maskall").hide();$("[fid=tipsaveimage]").text("头像保存失败！").css("color","red").show()}})}function closeIt(){window.location.href="http://my.vancl.com"}$(function(){$("#hidcustomerPath").val("")});function CallBack(){clearInterval(b);window.location.href="http://my.vancl.com/"};function VT_PageInit(){var a=$(".pic_list img");$(".finishnew img:eq(0)").bind("error",function(){$(this).attr("src","http://user.vanclimg.com/myavatar/vancl300.jpg")});a.click(function(){$("[fid=tipsavevt]").text("").hide();$(".finishnew img:eq(0)").attr("src",$(this).attr("src")).parent().next("[fid=msgvtnoimage]").hide();$("#filename").val($(this).attr("src"));a.removeClass("selected");$(this).addClass("selected")});a.hover(function(){if($(this).attr("src")==$("#filename").val()){return}a.removeClass("hover");$(this).addClass("hover")},function(){$(this).removeClass("hover")});var c=$(".finishnew img:eq(0)").attr("src");$(".pic_list img[src='"+c+"']").click()}function SaveVT(){$("[fid=tipsavevt]").text("").hide();if($("#filePath").val()==""){$("[fid=tipsavevt]").text("请选择图片！").css("color","red").show();return}var a=false;$(".pic_list img").each(function(){if($(this).attr("src")==$("#filename").val()){a=true}});if(!a){$("[fid=tipsavevt]").text("请选择图片！").css("color","red").show();return}$("#form1").unbind("submit").submit(function(){$.ajax({url:"/user/_SaveAvatarVT",data:$("#form1").serialize(),type:"POST",beforeSend:function(){$(".maskall").show()},success:function(c,d){$(".maskall").hide();if(c>0){$("#LastUploadaction").val("vt");$("[fid=tipsavevt]").text("头像保存成功！").css("color","#666666").show();b=setTimeout(function(){$("[fid=tipsavevt]").hide()},3000)}else{$("[fid=tipsavevt]").text("头像保存失败！").css("color","red").show()}$("#ID").val(c)},error:function(){$(".maskall").hide();$("[fid=tipsavevt]").text("头像保存失败！").css("color","red").show()}});return false});$("#form1").trigger("submit")}function CallBack(){clearInterval(b);$(".close80EE8D67985E").trigger("click")};var minHW=150;function Customer_PageInit(){minHW=150;imgInit();$("#fileupload").val("");$("#filePath").val("")};document.domain="vancl.com";$(function(){var a=$('<div id="imdiv"><img hspace="6" src="http://i.vanclimg.com/others/2011/11/9/icon.gif" align="absmiddle" /><a style="padding-right:8px;" href="http://imweb.vancl.com" id="impage" target="_blank">在线客服</a><a href="#"><img src="http://i.vanclimg.com/others/2011/11/9/top.gif" hspace="3" align="absmiddle" /></a></div>').attr("style","width:112px; height:25px; padding-top:3px;float:right; background:url(http://i.vanclimg.com/others/2011/11/9/bg.gif) center no-repeat; position:fixed;_position:absolute;_bottom:auto; right:0; bottom:0;_top:expression(eval(document.documentElement.scrollTop+document.documentElement.clientHeight-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0)))");$("body").append(a);$("#im").live("click",function(){$(this).prev("img").attr("http://i.vanclimg.com/others/2011/11/9/icon.gif");var b=$("#imiframe");if(b.length==0){b=$("<iframe />");b.attr("id","imiframe").attr("src",$(this).attr("href")).attr("frameborder","0").attr("scrolling","no").css({width:641,height:480,bottom:0,right:0,position:"fixed","z-index":9999}).attr("style","width:641px; height:480px;z-index:9999;position:fixed; _position:absolute;_bottom:auto; right:0; bottom:0;_top:expression(eval(document.documentElement.scrollTop+document.documentElement.clientHeight-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0)))").appendTo("body")}b.show();return false});window.hidePanel=function(){$("#im").prev("img").attr("src","http://i.vanclimg.com/others/2011/11/9/icon.gif");$("#imiframe").hide()};window.closePanel=function(){$("#im").prev("img").attr("src","http://i.vanclimg.com/others/2011/11/9/icon.gif");$("#imiframe").remove()};window.toTop=function(){window.scrollTo(0,0)};window.notifyNewMessage=function(){$("#im").prev("img").attr("src","http://i.vanclimg.com/others/2011/11/9/gif.gif")}});